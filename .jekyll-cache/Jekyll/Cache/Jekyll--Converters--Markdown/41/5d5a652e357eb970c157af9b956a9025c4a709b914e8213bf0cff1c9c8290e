I"Át<h2 id="æ‰“å¼€-android-studio-å¡åœ¨fetching-android-sdk-component-informationç•Œé¢">æ‰“å¼€ Android Studio å¡åœ¨ã€ŒFetching Android SDK component informationã€ç•Œé¢ã€‚</h2>

<p>å¦‚å›¾ï¼š</p>

<p><img src="/images/posts/android/android-studio-check-sdk.png" alt="" /></p>

<p>Android Studio First Run æ£€æµ‹ Android SDK åŠæ›´æ–°ï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæˆ‘ä»¬ä¼šã€ŒUnable to access Android SDK add-on listã€ï¼Œè€Œä¸”å¤§å®¶ä¸€èˆ¬ä¹Ÿå·²ç»æå‰é…ç½®å¥½äº† Android SDKï¼ŒçœŸæ­£éœ€è¦æ›´æ–°çš„æ—¶å€™æ‰‹åŠ¨å» SDK Manager æ›´æ–°å°±å¥½äº†ã€‚</p>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<p>åœ¨ Android Studio å®‰è£…ç›®å½• bin/idea.properties æ–‡ä»¶æœ€åè¿½åŠ ä¸€å¥</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>disable.android.first.run=true
</code></pre></div></div>

<p>å‚è€ƒï¼š <a href="http://ask.android-studio.org/?/article/14">http://ask.android-studio.org/?/article/14</a></p>

<h2 id="æ–°å»ºå·¥ç¨‹åæ„å»ºæ—¶æç¤ºæ‰¾ä¸åˆ°-appcompat-v7">æ–°å»ºå·¥ç¨‹åæ„å»ºæ—¶æç¤ºæ‰¾ä¸åˆ° appcompat-v7</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error:Failed to find: com.android.support:appcompat-v7:22.+
</code></pre></div></div>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<ol>
  <li>
    <p>æ‰“å¼€ SDK Managerï¼Œç„¶åå®‰è£… Extras ä¸‹çš„ Android Support Repositoryï¼š</p>

    <p><img src="/images/posts/android/android-support-repository.png" alt="" /></p>
  </li>
  <li>
    <p>Rebuild å·¥ç¨‹ã€‚</p>
  </li>
</ol>

<h2 id="aidl-æ–‡ä»¶çš„æ”¾ç½®">aidl æ–‡ä»¶çš„æ”¾ç½®</h2>

<p>æŒ‰ä»¥å‰ Eclipse çš„æ–¹å¼ï¼Œå°† aidl åŠå…¶åŒ…ç›®å½•å±‚çº§æ”¾ç½®åœ¨ä¸è‡ªå·±çš„é¡¶çº§åŒ…åŒçº§çš„ç›®å½•ä¸‹ï¼Œå³å¦‚ä¸‹çš„ android/content/pmï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/src/main
â”œâ”€assets
â”œâ”€java
â”‚  â”œâ”€android
â”‚  â”‚  â””â”€content
â”‚  â”‚      â””â”€pm
â”‚  â””â”€org
â”‚      â””â”€mazhuang
â”‚          â””â”€easycleaner
â””â”€res
   â”œâ”€drawable
   â”œâ”€layout
   â”œâ”€menu
   ...
</code></pre></div></div>

<p>ç„¶è€Œè¿™æ ·åœ¨è°ƒç”¨å¤„ä¸€ç›´æŠ¥é”™ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cannot resolve symbol 'IPackageStatsObserver'
</code></pre></div></div>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<p>å°† aidl æ–‡ä»¶æ”¾ç½®åœ¨ä¸ app/src/main/java ç›®å½•åŒçº§çš„ app/src/main/aidl æ–‡ä»¶å¤¹ä¸‹ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/src/main
â”œâ”€aidl
â”‚  â””â”€android
â”‚      â””â”€content
â”‚          â””â”€pm
â”œâ”€assets
â”œâ”€java
â”‚  â””â”€org
â”‚      â””â”€mazhuang
â”‚          â””â”€easycleaner
â””â”€res
   â”œâ”€drawable
   â”œâ”€layout
   â”œâ”€menu
   ...
</code></pre></div></div>

<h2 id="åœ¨-android-studio-é‡Œç¼–è¯‘é€šè¿‡ä¹‹åå‘½ä»¤è¡Œä½¿ç”¨-gradlew-build-ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šé‡æ–°ä¸‹è½½-gradle">åœ¨ Android Studio é‡Œç¼–è¯‘é€šè¿‡ä¹‹åï¼Œå‘½ä»¤è¡Œä½¿ç”¨ gradlew build ä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼šé‡æ–°ä¸‹è½½ Gradleï¼Ÿ</h2>

<p>Gradle çš„ç‰ˆæœ¬åœ¨ Android Studio å·¥ç¨‹é‡Œæœ‰ä¸‰å¤„ï¼š</p>

<p>ä¸€ã€gradle/wrapper/gradle-wrapper.properties æ–‡ä»¶çš„ distributionUrl å­—æ®µé‡ŒæŒ‡å®šçš„ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#Wed Oct 21 11:34:03 PDT 2015
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-2.8-all.zip
</code></pre></div></div>

<p>æ¯”å¦‚è¿™é‡ŒæŒ‡å®šçš„æ˜¯ 2.8 ç‰ˆæœ¬ã€‚</p>

<p>äºŒã€Android Studio çš„ File &gt; Project Structure &gt; Project é‡Œæ˜¾ç¤ºçš„ã€‚</p>

<p>è¿™ä¸ªå®é™…ä¸Šå°±æ˜¯æ˜¾ç¤ºçš„ã€Œä¸€ã€é‡Œçš„ç‰ˆæœ¬ã€‚</p>

<p>ä¸‰ã€Android Studio çš„ File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle é‡Œé€‰æ‹©çš„æ˜¯ã€ŒUse default gradle wrapper (recommended)ã€è¿˜æ˜¯ã€ŒUse local gradle distributionã€ã€‚</p>

<p>å‡ºç°é¢˜ç›®é‡Œçš„é—®é¢˜ä¸€èˆ¬æ˜¯ç”±äºã€Œä¸‰ã€ä¸­é€‰æ‹©çš„æ˜¯ã€ŒUse local gradle distributionã€ï¼Œè¿™ä¸ªé€‰é¡¹ä¸‹çš„ã€ŒGradle homeã€è·¯å¾„ä¸€èˆ¬æ˜¯æŒ‡å‘ Android Studio å®‰è£…ç›®å½•ä¸‹çš„ Gradle ç›®å½•ï¼Œæ¯”å¦‚ C:/Program Files/Android/Android Studio/gradle/gradle-2.8ï¼Œè€Œ gradlew è„šæœ¬æ˜¯ç‹¬ç«‹äº Android Studio çš„ï¼Œæ‰€ä»¥å¹¶ä¸å—å…¶é…ç½®çš„å½±å“ï¼Œå®ƒæ˜¯ä½¿ç”¨ã€Œä¸€ã€é‡ŒæŒ‡å®šçš„ç‰ˆæœ¬ï¼Œä¼šåˆ° ~/.gradle/wrapper/dists ç›®å½•ä¸‹å»å¯»æ‰¾å¯¹åº”ç‰ˆæœ¬çš„ Gradle æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰è¯å°±ä¼šå»é‡æ–°ä¸‹è½½ã€‚</p>

<h2 id="æ¨¡æ‹Ÿå™¨å¯åŠ¨å¤±è´¥">æ¨¡æ‹Ÿå™¨å¯åŠ¨å¤±è´¥</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PANIC: ANDROID_SDK_HOME is defined but could not find Nexus_5_API_23.ini file in $ANDROID_SDK_HOME/.android/avd
(Note: avd is searched in the order of $ANDROID_AVD_HOME,$ANDROID_SDK_HOME/.android/avd and $HOME/.android/avd)
</code></pre></div></div>

<p>å®é™…ä¸Šæ–‡ä»¶å­˜åœ¨äº $HOME/.android/avd ç›®å½•ä¸‹ï¼Œä½†çœ‹æ ·å­å¦‚æœè®¾ç½®äº† $ANDROID_SDK_HOME ç¯å¢ƒå˜é‡ï¼ŒAndroid Studio åœ¨ $ANDROID_SDK_HOME/.android/avd ä¸‹æ‰¾ä¸åˆ°æ¨¡æ‹Ÿå™¨æ–‡ä»¶å°†ç›´æ¥æŠ¥é”™ï¼Œè€Œä¸ä¼šå†å»æ‰¾ $HOME ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</p>

<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

<p>æ·»åŠ  $ANDROID_AVD_HOME ç¯å¢ƒå˜é‡ï¼Œå€¼ä¸º $HOME/.android/avd çš„å±•å¼€å…¨è·¯å¾„ã€‚</p>

<h2 id="debugkeystore-çš„å­˜æ”¾ä½ç½®">debug.keystore çš„å­˜æ”¾ä½ç½®</h2>

<p>åœ¨ä½¿ç”¨é«˜å¾·åœ°å›¾ SDK æ—¶ï¼Œéœ€è¦ key ä¸ keystore æ–‡ä»¶çš„ sha1 æ ¡éªŒé€šè¿‡ï¼Œè€Œæˆ‘å°† debug.keystore æ‹·è´åˆ° $HOME/.android ç›®å½•ä¸‹åå‘ç°ä¸€ç›´æç¤º key æ ¡éªŒå¤±è´¥ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä½¿ç”¨æˆ‘æ‹·è´åˆ° $HOME/.android ç›®å½•ä¸‹çš„ debug.keystore æ¥åš debug ç­¾åã€‚</p>

<p>åŸå› æ˜¯ debug.keystore çš„é»˜è®¤å­˜å‚¨è·¯å¾„æ˜¯ $HOME/.androidï¼Œä½†æ˜¯å¦‚æœé…ç½®äº† $ANDROID_SDK_HOMEï¼Œåˆ™ä¼šå°† debug.keystore $ANDROID_SDK_HOME/.android ç›®å½•ä¸‹ã€‚</p>

<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

<p>å°† debug.keystore æ–‡ä»¶æ‹·è´åˆ° $ANDROID_SDK_HOME/.android ç›®å½•ä¸‹ã€‚</p>

<p>BTW:</p>

<p>å…³äºç»™ App ç­¾åçš„æ‰‹åŠ¨ã€è‡ªåŠ¨æ–¹æ³•å‚è€ƒ <a href="http://developer.android.com/tools/publishing/app-signing.html">Signing Your Applications</a>ã€‚</p>

<p>Android Studio è‡ªåŠ¨ç”Ÿæˆçš„ debug.keystore çš„ä¿¡æ¯ï¼š</p>

<ul>
  <li>Keystore password: android</li>
  <li>Key alias: androiddebugkey</li>
  <li>Key password: android</li>
</ul>

<h2 id="ä¸€ç›´æç¤º-please-configure-android-sdk">ä¸€ç›´æç¤º Please configure Android SDK</h2>

<p>è¿™æ˜¯åœ¨ä¸€æ¬¡ç”µè„‘æ–­ç”µåå‡ºç°çš„ï¼Œè¯•äº†ä¸€äº›æ–¹æ³•ï¼Œæ›´æ–° Android Studioï¼Œå°† SDK Platforms åˆ é™¤äº†é‡æ–°ä¸‹ï¼Œéƒ½ä¸è¡Œï¼Œåæ¥å‘ç° Build Tools å¯ä»¥æ›´æ–°ï¼Œæ›´æ–°å®Œåå°±å¥½äº†ã€‚</p>

<h2 id="more-than-one-file-was-found-with-os-independent-path">More than one file was found with OS independent path</h2>

<p>æ¯”å¦‚ï¼Œåœ¨ netty-buffer-4.1.5.Final.jar ä¸ netty-common-4.1.5.Final.jar ä¸­éƒ½æœ‰ META-INF/io.netty.version.propertiesï¼Œæ‰€ä»¥ç¼–è¯‘æ—¶æŠ¥é”™ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>More than one file was found with OS independent path 'META-INF/io.netty.versions.properties'
</code></pre></div></div>

<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

<p>åœ¨ app/build.gradle é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="n">packagingOptions</span> <span class="o">{</span>
        <span class="n">pickFirst</span> <span class="s1">'META-INF/*'</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¡¨ç¤ºåªä¿ç•™ä¸€ä»½è¯¥æ–‡ä»¶ã€‚</p>

<p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/27977396/android-studio-duplicate-files-copied-in-apk-meta-inf-dependencies-when-compile">Android Studio: Duplicate files copied in APK META-INF/DEPENDENCIES when compile</a></p>

<h2 id="æ‰“å¼€-uiautomatorviewer-æŠ¥é”™">æ‰“å¼€ uiautomatorviewer æŠ¥é”™</h2>

<p>æ‰“å¼€ uiautomatorviewer æŠ¥é”™ï¼Œæç¤ºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Unable to connect to adb. Check if adb is installed correctly.
</code></pre></div></div>

<p>å®é™… adb å‘½ä»¤æ˜¯å¯æ­£å¸¸ä½¿ç”¨çš„ã€‚</p>

<p>è§£å†³æ–¹æ³•ï¼š</p>

<p>æ‰“å¼€ uiautomatorviewer.bat æ–‡ä»¶ï¼ˆWindows ä¸‹ï¼Œå…¶å®ƒç³»ç»Ÿå¯èƒ½æ˜¯ .shï¼‰ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™è¡Œï¼ˆä¸€èˆ¬æ˜¯æœ€åä¸€è¡Œï¼‰ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>call <span class="s2">"%java_exe%"</span> <span class="s2">"-Djava.ext.dirs=%javaextdirs%"</span> <span class="s2">"-Dcom.android.uiautomator.bindir=%prog_dir%"</span> <span class="nt">-jar</span> %jarpath% %<span class="k">*</span>
</code></pre></div></div>

<p>å°†å…¶ä¸­çš„ <code class="language-plaintext highlighter-rouge">%prog_dir%</code> æ”¹ä¸º Android SDK çš„ tools ç›®å½•è·¯å¾„ï¼Œæ¯”å¦‚ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>call <span class="s2">"%java_exe%"</span> <span class="s2">"-Djava.ext.dirs=%javaextdirs%"</span> <span class="s2">"-Dcom.android.uiautomator.bindir=D:</span><span class="se">\A</span><span class="s2">ndroid</span><span class="se">\s</span><span class="s2">dk</span><span class="se">\t</span><span class="s2">ools"</span> <span class="nt">-jar</span> %jarpath% %<span class="k">*</span>
</code></pre></div></div>

<p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/42696158/in-ui-automator-viewer-error-obtaining-device-screenshot-reason-error-unable">In UI automator viewer Error Obtaining Device screenshot, Reason : Error Unable to connect to adb. Check if adb is installed correctly</a></p>

<h2 id="is-not-translated-in-zh">is not translated in â€œzhâ€</h2>

<p>æŠ¥é”™ä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error: "app_name" is not translated in "zh" (Chinese) [MissingTranslation]
</code></pre></div></div>

<p>åœ¨å¼•ç”¨äº† Umeng çš„ SDK åç¼–è¯‘æŠ¥é”™ï¼Œç–‘æ˜¯ Umeng åŒ…é‡Œçš„ values-zh å¯¼è‡´ã€‚</p>

<p>è§£å†³æ–¹æ¡ˆ 1ï¼š</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources</span>
  <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
  <span class="na">tools:ignore=</span><span class="s">"MissingTranslation"</span> <span class="nt">&gt;</span>
</code></pre></div></div>

<p>è§£å†³æ–¹æ¡ˆ 2ï¼š</p>

<p>åœ¨ä¸»é¡¹ç›®çš„ build.gradle é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="n">lintOptions</span> <span class="o">{</span>
        <span class="n">checkReleaseBuilds</span> <span class="kc">false</span>
        <span class="n">abortOnError</span> <span class="kc">false</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>å‚è€ƒï¼š</p>

<ul>
  <li><a href="http://blog.csdn.net/cxc19890214/article/details/39120415">http://blog.csdn.net/cxc19890214/article/details/39120415</a></li>
  <li><a href="https://segmentfault.com/a/1190000000599530">https://segmentfault.com/a/1190000000599530</a></li>
</ul>

<h2 id="ä¸€ç›´å¡åœ¨-gradleresolve-dependenciesappdebugcompile">ä¸€ç›´å¡åœ¨ Gradle:Resolve dependenciesâ€™app:debugCompileâ€™</h2>

<p>è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯ Gradle å»æ‹‰å–æŸä¸ª dependencies çš„æ—¶å€™è¿ä¸ä¸Šå¯¼è‡´ã€‚</p>

<p>ä¸€ç§æ–¹æ³•æ˜¯å¦‚æœæœ¬åœ°æœ‰èƒ½ç¼–è¯‘é€šè¿‡çš„å…¶å®ƒå·¥ç¨‹ï¼Œä¿®æ”¹ compileSdkVersion å’Œ buildToolsVersion åŠ dependencies é‡Œçš„ç‰ˆæœ¬ä¸ºèƒ½ç¼–è¯‘é€šè¿‡çš„å·¥ç¨‹çš„ç‰ˆæœ¬ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯å°†å¯¹åº”çš„ä¾èµ–åŒ… jar ä¸‹è½½åˆ°æœ¬åœ°æ”¾åˆ° libs é‡Œé¢ï¼›è¿˜æœ‰ä¸€ç§æ€è·¯æ˜¯ä¿®æ”¹ jcenter() ä¸ºå…¶å®ƒå¯ç”¨çš„æºã€‚</p>

<h2 id="æ›´æ–°åˆ°-android-studio-30-åæŠ¥é”™">æ›´æ–°åˆ° Android Studio 3.0 åæŠ¥é”™</h2>

<p>æç¤ºä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Unable to resolve dependency for ':internal@packagingOptions/compileClasspath': Could not resolve project :commonlib.

Could not resolve project :commonlib.
Required by:
    project :internal
 &gt; Unable to find a matching configuration of project :commonlib:
     - Configuration 'debugApiElements':
         - Required com.android.build.api.attributes.BuildTypeAttr 'packagingOptions' and found incompatible value 'debug'.
         - Required com.android.build.gradle.internal.dependency.AndroidTypeAttr 'Aar' and found compatible value 'Aar'.
         - Found com.android.build.gradle.internal.dependency.VariantAttr 'debug' but wasn't required.
         - Required org.gradle.api.attributes.Usage 'java-api' and found compatible value 'java-api'.
     - Configuration 'debugRuntimeElements':
         - Required com.android.build.api.attributes.BuildTypeAttr 'packagingOptions' and found incompatible value 'debug'.
         - Required com.android.build.gradle.internal.dependency.AndroidTypeAttr 'Aar' and found compatible value 'Aar'.
         - Found com.android.build.gradle.internal.dependency.VariantAttr 'debug' but wasn't required.
         - Required org.gradle.api.attributes.Usage 'java-api' and found incompatible value 'java-runtime'.
     - Configuration 'releaseApiElements':
         - Required com.android.build.api.attributes.BuildTypeAttr 'packagingOptions' and found incompatible value 'release'.
         - Required com.android.build.gradle.internal.dependency.AndroidTypeAttr 'Aar' and found compatible value 'Aar'.
         - Found com.android.build.gradle.internal.dependency.VariantAttr 'release' but wasn't required.
         - Required org.gradle.api.attributes.Usage 'java-api' and found compatible value 'java-api'.
     - Configuration 'releaseRuntimeElements':
         - Required com.android.build.api.attributes.BuildTypeAttr 'packagingOptions' and found incompatible value 'release'.
         - Required com.android.build.gradle.internal.dependency.AndroidTypeAttr 'Aar' and found compatible value 'Aar'.
         - Found com.android.build.gradle.internal.dependency.VariantAttr 'release' but wasn't required.
         - Required org.gradle.api.attributes.Usage 'java-api' and found incompatible value 'java-runtime'.
</code></pre></div></div>

<p>æƒ…å†µæ˜¯æœ‰ä¸€ä¸ªå« internal çš„ project ä¾èµ–ä¸€ä¸ªå« commonlib çš„ moduleï¼Œæœ€åæŸ¥åˆ°åŸå› å¦‚ä¸‹ï¼š</p>

<p>internal project çš„ build.gradle æ–‡ä»¶é‡Œå†™äº†è¿™ä¹ˆä¸€æ®µï¼š</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">buildTypes</span> <span class="o">{</span>
        <span class="n">debug</span> <span class="o">{</span>
            <span class="n">signingConfig</span> <span class="n">signingConfigs</span><span class="o">.</span><span class="na">release</span>
        <span class="o">}</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">minifyEnabled</span> <span class="kc">false</span>
            <span class="n">proguardFiles</span> <span class="nf">getDefaultProguardFile</span><span class="o">(</span><span class="s1">'proguard-android.txt'</span><span class="o">),</span> <span class="s1">'proguard-rules.pro'</span>
            <span class="n">signingConfig</span> <span class="n">signingConfigs</span><span class="o">.</span><span class="na">release</span>
        <span class="o">}</span>
        <span class="n">packagingOptions</span> <span class="o">{</span>
            <span class="n">exclude</span> <span class="s1">'META-INF/INDEX.LIST'</span>
            <span class="n">exclude</span> <span class="s1">'log4j.xml'</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>å®é™… packagingOptions åº”è¯¥æ”¾åˆ° buildTypes ä¹‹å¤–ï¼Œæ”¹æˆè¿™æ ·å°± OK äº†ï¼š</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">packagingOptions</span> <span class="o">{</span>
        <span class="n">exclude</span> <span class="s1">'META-INF/INDEX.LIST'</span>
        <span class="n">exclude</span> <span class="s1">'log4j.xml'</span>
    <span class="o">}</span>

    <span class="n">buildTypes</span> <span class="o">{</span>
        <span class="n">debug</span> <span class="o">{</span>
            <span class="n">signingConfig</span> <span class="n">signingConfigs</span><span class="o">.</span><span class="na">release</span>
        <span class="o">}</span>
        <span class="n">release</span> <span class="o">{</span>
            <span class="n">minifyEnabled</span> <span class="kc">false</span>
            <span class="n">proguardFiles</span> <span class="nf">getDefaultProguardFile</span><span class="o">(</span><span class="s1">'proguard-android.txt'</span><span class="o">),</span> <span class="s1">'proguard-rules.pro'</span>
            <span class="n">signingConfig</span> <span class="n">signingConfigs</span><span class="o">.</span><span class="na">release</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ä»¥å‰æ›¾ç»é€šè¿‡è¿™æ ·ä¿®æ”¹ä¸´æ—¶æ©ç›–äº†é—®é¢˜ï¼Œè®©ç¼–è¯‘èƒ½è¿‡ï¼š</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">implementation</span> <span class="nf">project</span><span class="o">(</span><span class="nl">path:</span> <span class="s1">':commonlib'</span><span class="o">,</span> <span class="nl">configuration:</span> <span class="s1">'default'</span><span class="o">)</span> <span class="c1">// ä¸´æ—¶æ–¹æ¡ˆ</span>
    <span class="c1">// implementation project(':commonlib')  // åŸæ¥çš„æ ·å­</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¿™æ ·ä¿®æ”¹ç¼–è¯‘èƒ½é€šè¿‡ï¼Œä½†æ˜¯ä¼šæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ internal project å·¥ç¨‹é‡Œè°ƒç”¨ commonlib çš„æ–¹æ³•çš„åœ°æ–¹ï¼ŒCtrl + é¼ æ ‡å·¦é”®ï¼Œæˆ–è€…å³é”® Go To Declaration æ—¶ä¼šè·³åˆ° ~/.gradle/caches/transforms-1/files-1.1/commonlib-release.aar ç›®å½•é‡Œçš„ .class æ–‡ä»¶ï¼Œè€Œé .java æºæ–‡ä»¶ã€‚</p>

<p>å›ç­”åœ¨ <a href="https://stackoverflow.com/questions/46949622/android-studio-3-0-unable-to-resolve-dependency-for-appdexoptions-compilecla#answer-47426050">StackOverflow çš„ä¸€ä¸ªé—®é¢˜</a> ä¸‹ã€‚</p>

<h2 id="å¯åŠ¨æ¨¡æ‹Ÿå™¨æç¤º-intel-haxm-is-required-to-run-this-avd-your-cpu-does-not-support-vt-x">å¯åŠ¨æ¨¡æ‹Ÿå™¨æç¤º Intel HAXM is required to run this AVD your CPU does not support VT-x</h2>

<p>æˆ‘ä½¿ç”¨ Win10 ç³»ç»Ÿï¼Œæ¢ä¸»æ¿ä¹‹åé‡åˆ°çš„ï¼Œä¹‹å‰æ¨¡æ‹Ÿå™¨æ˜¯èƒ½æ­£å¸¸è¿è¡Œçš„ã€‚</p>

<p>æˆ‘é‡åˆ°çš„åŸå› æ˜¯ Hyper-V çš„å½±å“ï¼Œå¯¼è‡´æ— æ³•å®‰è£… HAXMï¼Œè™½ç„¶åœ¨ msconfig é‡ŒæŸ¥çœ‹æˆ‘çš„ Hyper-V æœåŠ¡éƒ½å·²ç»åœæ­¢ï¼Œæˆ‘åœ¨ BIOS é‡Œä¹Ÿå·²ç» Enable äº† Virtualization Technology ç›¸å…³çš„é€‰é¡¹ï¼Œä»ç„¶æŠ¥ç›¸åŒçš„é”™è¯¯ã€‚</p>

<p>è§£å†³æ­¥éª¤å‚è€ƒ <a href="http://blog.csdn.net/WangZuoChuan/article/details/54620016">http://blog.csdn.net/WangZuoChuan/article/details/54620016</a>ï¼š</p>

<ol>
  <li>
    <p>æ‰“å¼€ç®¡ç†å‘˜æƒé™çš„ CMD</p>
  </li>
  <li>
    <p>è¿è¡Œ <code class="language-plaintext highlighter-rouge">bcdedit /copy {current} /d â€œWindows10 no Hyper-V</code></p>

    <p>è¿™æ—¶ä¼šè¾“å‡ºä¸€ä¸ª UUID</p>
  </li>
  <li>
    <p>æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">bcdedit /set {XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX} hypervisorlaunchtype OFF</code></p>

    <p>å°† XXX éƒ¨åˆ†æ¢æˆæ­¥éª¤ 2 é‡Œè¾“å‡ºçš„ UUID</p>
  </li>
  <li>
    <p>åœ¨ msconfig çš„ã€Œå¼•å¯¼ã€é‡Œå°† <code class="language-plaintext highlighter-rouge">Windows 10 no Hyper-V</code> è®¾ä¸ºé»˜è®¤</p>
  </li>
  <li>
    <p>é‡å¯</p>
  </li>
</ol>

<h2 id="android-studio-é‡Œå¯¹æ‰€æœ‰-activity-æ˜¾ç¤ºè­¦å‘Š">Android Studio é‡Œå¯¹æ‰€æœ‰ Activity æ˜¾ç¤ºè­¦å‘Š</h2>

<p>è­¦å‘Šä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>methods findViewById(int) from android.app.Activity and findViewById(int) from android.support.v7.app.AppCompatActivity are inherited with the same signature
</code></pre></div></div>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>

<p>é¡¹ç›®é‡Œæœ‰å‡ ä¸ªæ¨¡å—ï¼Œæœ‰çš„ compileSdkVersion å’Œ targetSdkVersion æ˜¯ 25ï¼Œæœ‰çš„æ˜¯ 26ï¼Œå…¨éƒ¨æ”¹æˆ 26 å¹¶æŠŠ appcompat-v7 ç­‰ dependencies ä¹Ÿæ”¹æˆ 26 å¯¹åº”ç‰ˆæœ¬åé—®é¢˜æ¶ˆå¤±ã€‚ï¼ˆä½†è¯¡å¼‚çš„æ˜¯æˆ‘åæ¥æ”¹å› 25 æƒ³å¤ç°ä¸€ä¸‹ï¼Œé—®é¢˜å´ä¸å†å‡ºç°äº†ï¼‰</p>

<h2 id="plugin-with-id-comandroidapplication-not-found">Plugin with id â€˜com.android.applicationâ€™ not found</h2>

<p>å¯¼å…¥ä¸€ä¸ªåˆ«äººåšçš„å·¥ç¨‹çš„æ—¶å€™é‡åˆ°æŠ¥é”™ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error:(1, 0) Plugin with id 'com.android.application' not found
</code></pre></div></div>

<p>æ€€ç–‘æ˜¯ä½¿ç”¨æ¯”è¾ƒè€çš„ç‰ˆæœ¬çš„ Android Studio åˆ›å»ºï¼Œè¯¥å·¥ç¨‹åªæœ‰ä¸€ä¸ª build.gradle æ–‡ä»¶â€”â€”æˆ‘ä»¬å¹³æ—¶åˆ›å»ºçš„å·¥ç¨‹åº”è¯¥æ˜¯æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ª Project çº§åˆ«çš„ï¼Œä¸€ä¸ª Module çº§åˆ«çš„ã€‚</p>

<p>å®ƒæ˜¯åªæœ‰ä¸€ä¸ª Project çº§åˆ«çš„ gradle æ–‡ä»¶ï¼Œä½†æ˜¯å†…å®¹å´æ˜¯ Module çº§åˆ« gradle æ–‡ä»¶çš„å†…å®¹ã€‚</p>

<p>åæ¥åœ¨ StackOverflow ä¸Šæ‰¾åˆ° <a href="https://stackoverflow.com/questions/24795079/error1-0-plugin-with-id-com-android-application-not-found">è§£å†³æ–¹æ¡ˆ</a>ï¼š</p>

<p>åœ¨ build.gradle æ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆæ³¨æ„ Gradle ç‰ˆæœ¬ä¸ Gradle Plugin çš„ç‰ˆæœ¬å¯¹åº”ï¼‰ï¼š</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">buildscript</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">jcenter</span><span class="o">()</span>
        <span class="n">google</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="n">dependencies</span> <span class="o">{</span>
        <span class="n">classpath</span> <span class="s1">'com.android.tools.build:gradle:3.0.0'</span>

        <span class="c1">// NOTE: Do not place your application dependencies here; they belong</span>
        <span class="c1">// in the individual module build.gradle files</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">allprojects</span> <span class="o">{</span>
    <span class="n">repositories</span> <span class="o">{</span>
        <span class="n">jcenter</span><span class="o">()</span>
        <span class="n">google</span><span class="o">()</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="å‡çº§å-gradle-sync-å‡ºé”™">å‡çº§å Gradle sync å‡ºé”™</h2>

<p>ä» Android Studio 3.0.1 å‡çº§åˆ° 3.1 çš„æ—¶å€™ï¼Œ<code class="language-plaintext highlighter-rouge">Check for Updates...</code> æç¤ºè¶…æ—¶ï¼Œäºæ˜¯æŒ‚äº†ä»£ç†å‡çº§ã€‚ä½†æ˜¯å‡çº§å®Œæˆä¹‹åï¼Œæ‰“å¼€ä»¥å‰èƒ½é¡ºåˆ©æ„å»ºçš„å·¥ç¨‹ï¼Œæç¤º <code class="language-plaintext highlighter-rouge">Cause: jcenter.bintray.com:443 failed to respond</code>ï¼Œæ€€ç–‘æ˜¯ä»£ç†çš„åŸå› ï¼Œäºæ˜¯åœ¨ Settings é‡Œå°† HTTP Proxy é€‰é¡¹æ”¹ä¸ºä»¥å‰çš„ <code class="language-plaintext highlighter-rouge">no proxy</code>ï¼ŒæŠ¥é”™å˜æˆ <code class="language-plaintext highlighter-rouge">Connection refused: connect</code>ï¼Œæœç´¢äº†ä¸€ç•ªä¹‹åæ‰¾åˆ° <a href="https://stackoverflow.com/questions/36330895/gradle-sync-failed-connection-refused">è¿™ä¸ª</a>ï¼Œä¾æç¤ºæ‰“å¼€ ~/.gradle/gradle.propertiesï¼Œå‘ç°é‡Œé¢æœç„¶è¿˜å­˜åœ¨ä»£ç†çš„è®¾ç½®ä¿¡æ¯ï¼Œåˆ é™¤ä¹‹åé‡å¯ Android Studioï¼Œé—®é¢˜è§£å†³ã€‚</p>

<h2 id="generate-javadoc-æç¤ºé”™è¯¯-ç¼–ç gbkçš„ä¸å¯æ˜ å°„å­—ç¬¦">Generate JavaDoc æç¤ºâ€œé”™è¯¯: ç¼–ç GBKçš„ä¸å¯æ˜ å°„å­—ç¬¦â€</h2>

<p>æ‰€æœ‰ç›¸å…³æ–‡ä»¶çš„ç¼–ç éƒ½æ˜¯ UTF-8ï¼Œåœ¨ Android Studio é‡Œæ²¡æœ‰æ‰¾åˆ°è®¾ç½® JavaDoc ç›¸å…³çš„ç¼–ç è®¾ç½®é¡¹ï¼Œäºæ˜¯åœ¨ <code class="language-plaintext highlighter-rouge">Generate JavaDoc</code> æ—¶å¼¹å‡ºçš„ <code class="language-plaintext highlighter-rouge">Specify Generate JavaDoc Scope</code> å¯¹è¯æ¡†çš„ <code class="language-plaintext highlighter-rouge">Other command line arguments</code> ä¸€é¡¹é‡Œå¡«å…¥ <code class="language-plaintext highlighter-rouge">-encoding utf-8 -charset utf-8</code>ï¼Œé—®é¢˜è§£å†³ã€‚</p>

<p><img src="/images/posts/android/android-studio-javadoc.png" alt="android-studio-javadoc" /></p>

<h2 id="å‡çº§-gradle-plugin-ç‰ˆæœ¬åæŠ¥é”™">å‡çº§ Gradle Plugin ç‰ˆæœ¬åæŠ¥é”™</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The SourceSet 'instrumentTest' is not recognized by the Android Gradle Plugin. Perhaps you misspelled something?
</code></pre></div></div>

<p>å°† <code class="language-plaintext highlighter-rouge">android { sourceSets { } }</code> é‡Œçš„ <code class="language-plaintext highlighter-rouge">instrumentTest.setRoot(...)</code> æ”¹ä¸º <code class="language-plaintext highlighter-rouge">androidTest.setRoot(...)</code> åé—®é¢˜è§£å†³ã€‚</p>

<h2 id="ç¼–è¯‘æŠ¥é”™-errorexecution-failed-for-task-apptransformclasseswithdexforrelease">ç¼–è¯‘æŠ¥é”™ Error:Execution failed for task â€˜:app:transformClassesWithDexForReleaseâ€™</h2>

<p>æˆ‘è¿™é‡Œçš„åŸå› æ˜¯ä¸€ä¸ª APP ä¾èµ–ä¸€ä¸ª Moduleï¼Œè¿™ä¸¤ä¸ªä½¿ç”¨äº†ç›¸åŒçš„åŒ…åï¼Œå°† APP çš„åŒ…åæ”¹äº†ä¹‹åé—®é¢˜è§£å†³ã€‚</p>

<h2 id="å‡çº§åˆ°-31-åç¼–è¾‘-gradle-æ–‡ä»¶å¡é¡¿">å‡çº§åˆ° 3.1 åç¼–è¾‘ Gradle æ–‡ä»¶å¡é¡¿</h2>

<p>ä¸æ­¢æ˜¯å¡é¡¿â€¦â€¦åŸºæœ¬ä¸Šå°±æ˜¯æ•´ä¸ª Android Studio å¡ä½å‡ åç§’æ²¡åŠæ³•åŠ¨çš„é‚£ç§ã€‚åœ¨ç½‘ä¸Šæœç´¢ä¹‹åå‘ç°é‡åˆ°è¿™ç§é—®é¢˜çš„ç½‘å‹è¿˜æŒºå¤šï¼Œæœç„¶æ˜¯åƒåœ¾è½¯ä»¶æ¯æˆ‘é’æ˜¥ :-Pã€‚</p>

<p>å‚è€ƒ <a href="https://blog.csdn.net/wangluotianxi/article/details/79757558">https://blog.csdn.net/wangluotianxi/article/details/79757558</a>ï¼Œå¡é¡¿åŸå› æ˜¯ç¼–è¾‘ Gradle æ–‡ä»¶è¿‡ç¨‹ä¸­ä¸€ç›´åœ¨è¯·æ±‚ä¸‹é¢ä¸¤ä¸ªæ¥å£ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://search.maven.org/solrsearch/select?q=g:%22com.google.android.support%22+AND+a:%22wearable%22&amp;core=gav&amp;rows=1&amp;wt=json
http://search.maven.org/solrsearch/select?q=g:%22com.google.android.gms%22+AND+a:%22play-services%22&amp;core=gav&amp;rows=1&amp;wt=json
</code></pre></div></div>

<p>è€Œä¸”ï¼Œç»“æœè¿”å›ä¹‹å‰ä¼šå¡ä½ç•Œé¢ï¼Œè€Œæˆ‘ä»¬çš„ç½‘ç»œè®¿é—®è¿™ä¿©ç½‘å€åŸºæœ¬åªèƒ½ç­‰åˆ°è¶…æ—¶è¿”å›äº†ï¼Œæ‰€ä»¥ï¼Œä¸´æ—¶è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ hosts æ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œè®©è¿™ä¿©è¯·æ±‚å¿«é€Ÿå¤±è´¥è¿”å›ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1 search.maven.org
</code></pre></div></div>

<p>æš‚æœªå‘ç°å¯¹æ­£å¸¸åŠŸèƒ½æœ‰å½±å“ã€‚</p>

<h2 id="ç¼–è¯‘æŠ¥é”™-you-should-manually-set-the-same-version-via-dependencyresolution">ç¼–è¯‘æŠ¥é”™ You should manually set the same version via DependencyResolution</h2>

<blockquote>
  <p>Android dependency â€˜org.mazhuang:commonlibâ€™ has different version for the compile (0.0.4) and runtime (0.0.5) classpath. You should manually set the same version via DependencyResolution</p>
</blockquote>

<p>Project A ä½¿ç”¨äº† Module Bï¼ŒA ä¾èµ– commonlib(0.0.4)ï¼Œè€Œ Module B é‡Œå¼•ç”¨äº† commonlib(0.0.5)ï¼Œå°† A ä¹Ÿæ”¹ä¸ºä¾èµ– commonlib(0.0.5) å³å¯ã€‚</p>

<h2 id="ç¼–è¯‘æŠ¥é”™-please-use-jdk-8-or-newer">ç¼–è¯‘æŠ¥é”™ Please use JDK 8 or newer</h2>

<p>Gradle Sync çš„æ—¶å€™æ— æ³•æˆåŠŸï¼ŒæŠ¥é”™</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Gradle sync failed: Please use JDK 8 or newer
</code></pre></div></div>

<p>å°è¯• Rebuild æŠ¥é”™</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Supplied javaHome is not a valid folder.
</code></pre></div></div>

<p>åŸå› æ˜¯æˆ‘åœ¨ Project Settings çš„ SDK Location é‡Œæ‰‹åŠ¨æŒ‡å®šäº† JDK çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åæ¥å‡çº§äº† JDKï¼Œæ‰€ä»¥åŸæœ‰è·¯å¾„å¤±æ•ˆäº†ã€‚</p>

<p>è§£å†³æ–¹æ³•æ˜¯å°† Project Settings çš„ SDK Location é‡Œ JDK çš„è·¯å¾„æ”¹ä¸ºæ­£ç¡®è·¯å¾„ï¼Œæˆ–è€…çœäº‹èµ·è§å¯ä»¥ç›´æ¥å‹¾é€‰ Use embedded JDK å³å¯ã€‚</p>

<h2 id="ç¼–è¯‘æŠ¥é”™-caused-by-javaioioexception-cannot-run-program">ç¼–è¯‘æŠ¥é”™ Caused by: java.io.IOException: Cannot run program</h2>

<p>æç¤ºæ‰¾ä¸åˆ° NDK å·¥å…·é“¾é‡Œçš„ <code class="language-plaintext highlighter-rouge">mips64el-linux-android-strip</code>ï¼Œå¯¼è‡´ <code class="language-plaintext highlighter-rouge">Caused by: java.io.IOException: error=2</code>ã€‚</p>

<p>åŸå› æ˜¯ NDK r17 ç§»é™¤äº†å¯¹ ARMv5(armeabi)ã€MIPS å’Œ MIPS64 çš„æ”¯æŒï¼Œæ‰€ä»¥å¯¹åº”çš„å·¥å…·é“¾ä¹Ÿæ²¡æœ‰äº†ã€‚</p>

<p>è§£å†³åŠæ³•æœ‰å‡ ç§ï¼š</p>

<ol>
  <li>
    <p>æ£€æŸ¥ Gradle Plugin çš„ç‰ˆæœ¬ï¼Œå³ project çº§åˆ«çš„ build.gralde æ–‡ä»¶é‡Œ</p>

    <div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">dependencies</span> <span class="o">{</span>
     <span class="n">classpath</span> <span class="s1">'com.android.tools.build:gradle:3.1.3'</span>
     <span class="o">...</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">com.android.tools.build:gradle</code> çš„ç‰ˆæœ¬æ”¹ä¸º 3.1  ä»¥ä¸Šã€‚</p>
  </li>
  <li>
    <p>å°† NDK ç‰ˆæœ¬é€€å› 16bï¼Œæˆ–å°† 16b ä»¥ä¸‹çš„å¯¹åº” mips å·¥å…·é“¾çš„æ–‡ä»¶å¤¹æ‹·è´åˆ° r17 çš„å¯¹åº”ç›®å½•ä¸‹ã€‚</p>
  </li>
</ol>

:ET