I"Dú<p>æœ¬æ–‡åˆ—å‡ºäº†HTMLå¸¸ç”¨æ ‡ç­¾å«ä¹‰åŠå¯¹åº”ä¸­è‹±æ–‡ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å’Œè®°å¿†ã€‚</p>

<h2 id="nginxçš„é…ç½®æ–‡ä»¶è§„åˆ™">Nginxçš„é…ç½®æ–‡ä»¶è§„åˆ™</h2>

<p>Nginxé…ç½®æ–‡ä»¶è§„åˆ™
Nginx æœåŠ¡å¯åŠ¨æ—¶ä¼šè¯»å…¥é…ç½®æ–‡ä»¶ï¼Œåç»­çš„è¡Œä¸ºåˆ™æŒ‰ç…§é…ç½®æ–‡ä»¶ä¸­çš„æŒ‡ä»¤è¿›è¡Œã€‚Nginx çš„é…ç½®æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œé»˜è®¤å®‰è£… Nginx åï¼Œå…¶é…ç½®æ–‡ä»¶å‡åœ¨usr/local/nginx/conf/ ç›®å½•ä¸‹ã€‚å…¶ä¸­ï¼Œnginx.conf ä¸ºä¸»é…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶ä¸­ä»¥ # å¼€å§‹çš„è¡Œï¼Œæˆ–è€…æ˜¯å‰é¢æœ‰è‹¥å¹²ç©ºæ ¼æˆ–è€… TAB é”®ï¼Œç„¶åå†è·Ÿ #è¡Œï¼Œéƒ½è¢«è®¤ä¸ºæ˜¯æ³¨é‡Šã€‚è¿™é‡Œåªæ˜¯äº†è§£ä¸»é…ç½®æ–‡ä»¶çš„ç»“æ„ã€‚</p>

<p>Nginx é…ç½®æ–‡ä»¶æ˜¯ä»¥ blockï¼ˆå—ï¼‰å½¢å¼ç»„ç»‡ï¼Œæ¯ä¸ª block éƒ½æ˜¯ä»¥ä¸€ä¸ªå—åå­—å’Œä¸€å¯¹å¤§æ‹¬å· â€œ{}â€ è¡¨ç¤ºç»„æˆï¼Œblock åˆ†ä¸ºå‡ ä¸ªå±‚çº§ï¼Œæ•´ä¸ªé…ç½®æ–‡ä»¶ä¸º mainå±‚çº§ï¼Œå³æœ€å¤§çš„å±‚çº§ï¼›åœ¨ main å±‚çº§ä¸‹å¯ä»¥æœ‰ eventã€http ã€mail ç­‰å±‚çº§ï¼Œè€Œ http ä¸­åˆä¼šæœ‰ server blockï¼Œserver blockä¸­å¯ä»¥åŒ…å« locatioblockã€‚å³å—ä¹‹é—´æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œå†…å±‚å—ç»§æ‰¿å¤–å±‚å—ã€‚æœ€åŸºæœ¬çš„é…ç½®é¡¹è¯­æ³•æ ¼å¼æ˜¯â€œé…ç½®é¡¹å é…ç½®é¡¹å€¼1 é…ç½®é¡¹å€¼2 é…ç½®é¡¹å€¼3 â€¦ â€ï¼›</p>

<p>æ¯ä¸ªå±‚çº§å¯ä»¥æœ‰è‡ªå·±çš„æŒ‡ä»¤ï¼ˆDirectiveï¼‰ï¼Œä¾‹å¦‚ worker_processes æ˜¯ä¸€ä¸ªmainå±‚çº§æŒ‡ä»¤ï¼Œå®ƒæŒ‡å®š Nginx æœåŠ¡çš„ Worker è¿›ç¨‹æ•°é‡ã€‚æœ‰çš„æŒ‡ä»¤åªèƒ½ä¸ªå±‚çº§ä¸­é…ç½®ï¼Œå¦‚worker_processes åªèƒ½å­˜åœ¨äº main ä¸­ï¼Œè€Œæœ‰çš„æŒ‡ä»¤å¯ä»¥å­˜åœ¨äºå¤šä¸ªå±‚çº§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­ block ä¼šç»§æ‰¿ çˆ¶ block çš„é…ç½®ï¼Œå¦‚æœå­blocké…ç½®äº†ä¸çˆ¶blockä¸åŒçš„æŒ‡ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰çˆ¶ block çš„é…ç½®ã€‚æŒ‡ä»¤çš„æ ¼å¼æ˜¯â€œæŒ‡ä»¤å å‚æ•°1 å‚æ•°2 â€¦ å‚æ•°N;â€ï¼Œæ³¨æ„å‚æ•°é—´å¯ç”¨ä»»æ„æ•°é‡åˆ†éš”ï¼Œæœ€åè¦åŠ åˆ†å·ã€‚</p>

<p>ä¸‹å›¾æ˜¯ Nginx é…ç½®æ–‡ä»¶é€šå¸¸ç»“æ„å›¾ç¤ºã€‚
<img src="/assets/images/nginx/nginx_conf.png" alt="Nginxé…ç½®" class="img-responsive" /></p>

<h2 id="nginx-æœåŠ¡çš„åŸºæœ¬é…ç½®é¡¹">Nginx æœåŠ¡çš„åŸºæœ¬é…ç½®é¡¹</h2>

<p>Nginx æœåŠ¡è¿è¡Œæ—¶ï¼Œéœ€è¦åŠ è½½å‡ ä¸ªæ ¸å¿ƒæ¨¡å—å’Œä¸€ä¸ªäº‹ä»¶æ¨¡å—ï¼Œè¿™äº›æ¨¡å—è¿è¡Œæ—¶æ‰€æ”¯æŒçš„é…ç½®é¡¹ç§°ä¸ºåŸºæœ¬é…ç½®ï¼›åŸºæœ¬é…ç½®é¡¹å¤§æ¦‚å¯åˆ†ä¸ºä»¥ä¸‹å››ç±»ï¼š</p>

<ul>
  <li>ç”¨äºè°ƒè¯•ã€å®šä½çš„é…ç½®é¡¹ï¼›</li>
  <li>æ­£å¸¸è¿è¡Œçš„å¿…å¤‡é…ç½®é¡¹ï¼›</li>
  <li>ä¼˜åŒ–æ€§èƒ½çš„é…ç½®é¡¹ï¼›</li>
  <li>äº‹ä»¶ç±»é…ç½®é¡¹ï¼›</li>
</ul>

<p>å„ä¸ªé…ç½®é¡¹çš„å…·ä½“å®ç°å¦‚ä¸‹</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Nginx æœåŠ¡åŸºæœ¬é…ç½®é¡¹ */</span>

<span class="cm">/* ç”¨äºè°ƒè¯•ã€å®šä½çš„é…ç½®é¡¹ */</span>

<span class="err">#</span><span class="n">ä»¥å®ˆæŠ¤è¿›ç¨‹</span> <span class="nc">Nginx</span> <span class="n">è¿è¡Œæ–¹å¼</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">daemon</span> <span class="n">off</span> <span class="o">|</span> <span class="n">on</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">daemon</span> <span class="n">on</span><span class="o">;</span>

<span class="err">#</span><span class="n">master</span> <span class="o">/</span> <span class="n">worker</span> <span class="n">å·¥ä½œæ–¹å¼</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">master_process</span> <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">master_process</span> <span class="n">on</span><span class="o">;</span>

<span class="err">#</span><span class="n">error</span> <span class="n">æ—¥å¿—è®¾ç½®</span>
<span class="err">#</span>                   <span class="n">è·¯å¾„</span>        <span class="n">é”™è¯¯çº§åˆ«</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">error_log</span>    <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">file</span>  <span class="n">level</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">error_log</span>    <span class="n">logs</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="na">log</span>  <span class="n">error</span><span class="o">;</span>
<span class="err">#</span><span class="n">å…¶ä¸­</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">fileæ˜¯ä¸€ä¸ªå…·ä½“æ–‡ä»¶</span><span class="err">ï¼›</span><span class="n">levelæ˜¯æ—¥å¿—çš„è¾“å‡ºçº§åˆ«</span><span class="err">ï¼Œ</span><span class="n">å…¶å–å€¼å¦‚ä¸‹</span><span class="err">ï¼š</span>
<span class="err">#</span>   <span class="n">debug</span> <span class="n">info</span> <span class="n">notice</span> <span class="n">warn</span> <span class="n">error</span> <span class="n">crit</span> <span class="n">alert</span> <span class="n">emerg</span>
<span class="err">#</span><span class="n">ä»å·¦è‡³å³çº§åˆ«å¢å¤§</span><span class="err">ï¼›</span><span class="n">è‹¥è®¾å®šä¸€ä¸ªçº§åˆ«å</span><span class="err">ï¼Œ</span><span class="n">åˆ™åœ¨è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶ä¸­åªè¾“å‡ºçº§åˆ«å¤§äºæˆ–ç­‰äºå·²è®¾å®šçš„çº§åˆ«</span><span class="err">ï¼›</span>

<span class="err">#</span><span class="n">å¤„ç†ç‰¹æ®Šè°ƒè¯•ç‚¹</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">debug_points</span> <span class="o">[</span><span class="n">stop</span> <span class="o">|</span> <span class="n">abort</span><span class="o">]</span>
<span class="err">#</span><span class="n">è¿™ä¸ªè®¾ç½®æ˜¯æ¥è·Ÿè¸ªè°ƒè¯•</span> <span class="nc">Nginx</span> <span class="n">çš„</span><span class="err">ï¼›</span>

<span class="err">#</span><span class="n">ä»…å¯¹æŒ‡å®šçš„å®¢æˆ·ç«¯è¾“å‡º</span> <span class="n">debug</span> <span class="n">çº§åˆ«çš„æ—¥å¿—</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">debug_connection</span> <span class="o">[</span><span class="no">IP</span> <span class="o">|</span> <span class="no">DIR</span><span class="o">]</span>

<span class="err">#</span><span class="n">é™åˆ¶</span> <span class="n">coredump</span> <span class="n">æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶çš„å¤§å°</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_rlimit_core</span>   <span class="n">size</span><span class="o">;</span>

<span class="err">#</span><span class="n">æŒ‡å®š</span> <span class="n">coredump</span> <span class="n">æ–‡ä»¶çš„ç”Ÿæˆç›®å½•</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">working_directory</span>    <span class="n">path</span><span class="o">;</span>

<span class="cm">/* æ­£å¸¸è¿è¡Œçš„é…ç½®é¡¹ */</span>

<span class="err">#</span><span class="n">å®šä¹‰ç¯å¢ƒå˜é‡</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">env</span>  <span class="no">VAR</span> <span class="o">|</span> <span class="no">VAR</span><span class="o">=</span><span class="no">VALUE</span><span class="o">;</span>
<span class="err">#</span><span class="no">VAR</span> <span class="n">æ˜¯å˜é‡å</span><span class="err">ï¼Œ</span><span class="no">VALUE</span> <span class="n">æ˜¯ç›®å½•</span><span class="err">ï¼›</span>

<span class="err">#</span><span class="n">åµŒå…¥å…¶ä»–é…ç½®æ–‡ä»¶</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">include</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">;</span>
<span class="err">#</span><span class="n">include</span> <span class="n">é…ç½®é¡¹å¯ä»¥å°†å…¶ä»–é…ç½®æ–‡ä»¶åµŒå…¥åˆ°</span> <span class="nc">Nginx</span> <span class="n">çš„</span> <span class="n">nginx</span><span class="o">.</span><span class="na">conf</span> <span class="n">æ–‡ä»¶ä¸­</span><span class="err">ï¼›</span>

<span class="err">#</span><span class="n">pid</span> <span class="n">çš„æ–‡ä»¶è·¯å¾„</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">pid</span>  <span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">pid</span>  <span class="n">logs</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="na">pid</span><span class="o">;</span>
<span class="err">#</span><span class="n">ä¿å­˜</span> <span class="n">master</span> <span class="n">è¿›ç¨‹</span> <span class="no">ID</span> <span class="n">çš„</span> <span class="n">pid</span> <span class="n">æ–‡ä»¶å­˜æ”¾è·¯å¾„</span><span class="err">ï¼›</span>

<span class="err">#</span><span class="nc">Nginx</span> <span class="n">worker</span> <span class="n">è¿è¡Œçš„ç”¨æˆ·åŠç”¨æˆ·ç»„</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">user</span> <span class="n">username</span>    <span class="o">[</span><span class="n">groupname</span><span class="o">];</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">user</span> <span class="n">nobody</span> <span class="n">nobody</span><span class="o">;</span>

<span class="err">#</span><span class="n">æŒ‡å®š</span> <span class="nc">Nginx</span> <span class="n">workerè¿›ç¨‹å¯æ‰“å¼€æœ€å¤§å¥æŸ„ä¸ªæ•°</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_rlimit_nofile</span> <span class="n">limit</span><span class="o">;</span>

<span class="err">#</span><span class="n">é™åˆ¶ä¿¡å·é˜Ÿåˆ—</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_rlimit_sigpending</span> <span class="n">limit</span><span class="o">;</span>
<span class="err">#</span><span class="n">è®¾ç½®æ¯ä¸ªç”¨æˆ·å‘ç»™</span> <span class="nc">Nginx</span> <span class="n">çš„ä¿¡å·é˜Ÿåˆ—å¤§å°</span><span class="err">ï¼Œ</span><span class="n">è¶…å‡ºåˆ™ä¸¢å¼ƒ</span><span class="err">ï¼›</span>

<span class="cm">/* ä¼˜åŒ–æ€§èƒ½é…ç½®é¡¹ */</span>

<span class="err">#</span><span class="nc">Nginx</span> <span class="n">worker</span> <span class="n">è¿›ç¨‹çš„ä¸ªæ•°</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_process</span>   <span class="n">number</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">worker_process</span>   <span class="mi">1</span><span class="o">;</span>

<span class="err">#</span><span class="n">ç»‘å®š</span> <span class="nc">Nginx</span> <span class="n">worker</span> <span class="n">è¿›ç¨‹åˆ°æŒ‡å®šçš„</span> <span class="no">CPU</span> <span class="n">å†…æ ¸</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_cpu_affinity</span>  <span class="n">cpumask</span> <span class="o">[</span><span class="n">cpumask</span><span class="o">...]</span>

<span class="err">#</span><span class="no">SSL</span> <span class="n">ç¡¬ä»¶åŠ é€Ÿ</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">ssl_engine</span>   <span class="n">device</span><span class="o">;</span>

<span class="err">#</span><span class="n">ç³»ç»Ÿè°ƒç”¨</span> <span class="n">gettimeofday</span> <span class="n">çš„æ‰§è¡Œé¢‘ç‡</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">timer_resolution</span> <span class="n">t</span><span class="o">;</span>

<span class="err">#</span><span class="nc">Nginx</span> <span class="n">worker</span> <span class="n">è¿›ç¨‹ä¼˜å…ˆçº§è®¾ç½®</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">worker_priority</span>  <span class="n">nice</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">worker_priority</span>  <span class="mi">0</span><span class="o">;</span>

<span class="cm">/* äº‹ä»¶ç±»é…ç½®é¡¹  */</span>
<span class="err">#</span><span class="n">ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§é…ç½®</span><span class="err">ï¼š</span>
<span class="err">#</span><span class="mi">1</span><span class="err">ã€</span><span class="n">æ˜¯å¦æ‰“å¼€accepté”</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">accept_mutex</span> <span class="o">[</span><span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">];</span>

<span class="err">#</span><span class="mi">2</span><span class="err">ã€</span><span class="n">lockæ–‡ä»¶çš„è·¯å¾„</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">lock_file</span>  <span class="n">path</span><span class="o">/</span><span class="n">file</span><span class="o">;</span>

<span class="err">#</span><span class="mi">3</span><span class="err">ã€</span><span class="n">ä½¿ç”¨accepté”ååˆ°çœŸæ­£å»ºç«‹è¿æ¥ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">accept_mutex_delay</span> <span class="nc">Nms</span><span class="o">;</span>

<span class="err">#</span><span class="mi">4</span><span class="err">ã€</span><span class="n">æ‰¹é‡å»ºç«‹æ–°è¿æ¥</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">multi_accept</span> <span class="o">[</span><span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">];</span>
<span class="err">#</span>
<span class="err">#</span><span class="mi">5</span><span class="err">ã€</span><span class="n">é€‰æ‹©äº‹ä»¶æ¨¡å‹</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">use</span> <span class="o">[</span><span class="n">kqueue</span> <span class="o">|</span> <span class="n">rtisg</span> <span class="o">|</span> <span class="n">epoll</span> <span class="o">|</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">poll</span> <span class="o">|</span> <span class="n">select</span> <span class="o">|</span> <span class="n">poll</span> <span class="o">|</span> <span class="n">eventport</span><span class="o">];</span>

<span class="err">#</span><span class="mi">6</span><span class="err">ã€</span><span class="n">æ¯ä¸ªworkerè¿›è¡Œçš„æœ€å¤§è¿æ¥æ•°</span>
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">worker_connections</span> <span class="n">number</span><span class="o">;</span>

</code></pre></div></div>

<p>httpæ ¸å¿ƒæ¨¡å—</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* HTTP æ ¸å¿ƒæ¨¡å—é…ç½®çš„åŠŸèƒ½ */</span>

<span class="cm">/* è™šæ‹Ÿä¸»æœºä¸è¯·æ±‚åˆ†å‘ */</span>

<span class="err">#</span><span class="n">ç›‘å¬ç«¯å£</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">listen</span>   <span class="nl">address:</span><span class="n">port</span><span class="o">[</span><span class="k">default</span> <span class="o">|</span> <span class="n">default_server</span> <span class="o">|</span> <span class="o">[</span><span class="n">backlong</span><span class="o">=</span><span class="n">num</span> <span class="o">|</span> <span class="n">rcvbuf</span><span class="o">=</span><span class="n">size</span> <span class="o">|</span> <span class="n">sndbuf</span><span class="o">=</span><span class="n">size</span> <span class="o">|</span> 
<span class="err">#</span> <span class="n">accept_filter</span> <span class="o">|</span> <span class="n">deferred</span> <span class="o">|</span> <span class="n">bind</span> <span class="o">|</span> <span class="n">ipv6only</span><span class="o">=[</span><span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">]</span> <span class="o">|</span> <span class="n">ssl</span><span class="o">]];</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="nl">listen:</span><span class="mi">80</span><span class="o">;</span>
<span class="err">#</span> <span class="n">è¯´æ˜</span><span class="err">ï¼š</span>
<span class="err">#</span>   <span class="n">defaultæˆ–default_server</span><span class="err">ï¼š</span><span class="n">å°†æ‰€åœ¨çš„serverå—ä½œä¸ºwebæœåŠ¡çš„é»˜è®¤serverå—</span><span class="err">ï¼›</span><span class="n">å½“è¯·æ±‚æ— æ³•åŒ¹é…é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰ä¸»æœºåæ—¶</span><span class="err">ï¼Œ</span><span class="n">å°±ä¼šé€‰æ‹©é»˜è®¤çš„è™šæ‹Ÿä¸»æœº</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">backlog</span><span class="o">=</span><span class="n">num</span><span class="err">ï¼š</span><span class="n">è¡¨ç¤º</span> <span class="no">TCP</span> <span class="n">ä¸­backlogé˜Ÿåˆ—å­˜æ”¾TCPæ–°è¿æ¥è¯·æ±‚çš„å¤§å°</span><span class="err">ï¼Œ</span><span class="n">é»˜è®¤æ˜¯</span><span class="o">-</span><span class="mi">1</span><span class="err">ï¼Œ</span><span class="n">è¡¨ç¤ºä¸äºˆè®¾ç½®</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">rcvbuf</span><span class="o">=</span><span class="n">size</span><span class="err">ï¼š</span><span class="n">è®¾ç½®ç›‘å¬å¥æŸ„SO_RCVBUFçš„å‚æ•°</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">sndbuf</span><span class="o">=</span><span class="n">size</span><span class="err">ï¼š</span><span class="n">è®¾ç½®ç›‘å¬å¥æŸ„SO_SNDBUFçš„å‚æ•°</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">accept_filter</span><span class="err">ï¼š</span><span class="n">è®¾ç½®acceptè¿‡æ»¤å™¨</span><span class="err">ï¼Œ</span><span class="n">åªå¯¹FreeBSDæ“ä½œç³»ç»Ÿæœ‰ç”¨</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">deferred</span><span class="err">ï¼š</span><span class="n">è®¾ç½®è¯¥å‚æ•°å</span><span class="err">ï¼Œ</span><span class="n">è‹¥ç”¨æˆ·å‘èµ·TCPè¿æ¥è¯·æ±‚</span><span class="err">ï¼Œ</span><span class="n">å¹¶ä¸”å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹</span><span class="err">ï¼Œ</span><span class="n">ä½†æ˜¯è‹¥ç”¨æˆ·æ²¡æœ‰å‘é€æ•°æ®</span><span class="err">ï¼Œ</span><span class="n">åˆ™ä¸ä¼šå”¤é†’workerè¿›ç¨‹</span><span class="err">ï¼Œ</span><span class="n">ç›´åˆ°å‘é€æ•°æ®</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">bind</span><span class="err">ï¼š</span><span class="n">ç»‘å®šå½“å‰ç«¯å£</span> <span class="o">/</span> <span class="n">åœ°å€å¯¹</span><span class="err">ï¼Œ</span><span class="n">åªæœ‰åŒæ—¶å¯¹ä¸€ä¸ªç«¯å£ç›‘å¬å¤šä¸ªåœ°å€æ—¶æ‰ä¼šç”Ÿæ•ˆ</span><span class="err">ï¼›</span>
<span class="err">#</span>   <span class="n">ssl</span><span class="err">ï¼š</span><span class="n">åœ¨å½“å‰ç«¯å£å»ºç«‹çš„è¿æ¥å¿…é¡»åŸºäºsslåè®®</span><span class="err">ï¼›</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span>

<span class="err">#</span><span class="n">ä¸»æœºåç§°</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">server_name</span>  <span class="n">name</span><span class="o">[...];</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_name</span>  <span class="o">&amp;</span><span class="n">quot</span><span class="o">;&amp;</span><span class="n">quot</span><span class="o">;;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span>

<span class="err">#</span><span class="n">server</span> <span class="n">name</span> <span class="n">æ˜¯ä½¿ç”¨æ•£åˆ—è¡¨å­˜å‚¨çš„</span>
<span class="err">#</span><span class="n">æ¯ä¸ªæ•£åˆ—æ¡¶å ç”¨å†…å­˜å¤§å°</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">server_names_hash_bucket_size</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_names_hash_bucker_size</span>    <span class="mi">32</span><span class="o">|</span><span class="mi">64</span><span class="o">|</span><span class="mi">128</span><span class="o">;</span>
<span class="err">#</span>
<span class="err">#</span><span class="n">æ•£åˆ—è¡¨æœ€å¤§bucketæ•°é‡</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">server_names_hash_max_size</span>   <span class="n">size</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_names_hash_max_size</span>   <span class="mi">512</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_name_in_redirect</span>  <span class="n">on</span><span class="o">;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span><span class="err">ã€</span><span class="n">http</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span><span class="n">å¤„ç†é‡å®šå‘ä¸»æœºå</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">server_name_in_redirect</span>  <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_name_in_redirect</span>  <span class="n">on</span><span class="o">;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span><span class="err">ã€</span><span class="n">http</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span><span class="n">locationè¯­æ³•</span><span class="err">ï¼š</span><span class="n">location</span><span class="o">[=</span> <span class="o">|</span> <span class="o">~</span> <span class="o">|</span> <span class="o">~*</span> <span class="o">|</span> <span class="o">^~</span> <span class="o">|</span> <span class="err">@</span><span class="o">]</span> <span class="o">/</span><span class="n">uri</span><span class="o">/</span> <span class="o">{}</span>  
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span>
        <span class="err">#</span><span class="n">locationå°è¯•æ ¹æ®ç”¨æˆ·è¯·æ±‚ä¸­çš„URIæ¥åŒ¹é…</span> <span class="o">/</span><span class="n">uriè¡¨è¾¾å¼</span><span class="err">ï¼Œ</span><span class="n">è‹¥åŒ¹é…æˆåŠŸ</span><span class="err">ï¼Œ</span><span class="n">åˆ™æ‰§è¡Œ</span><span class="o">{}</span><span class="n">é‡Œé¢çš„é…ç½®æ¥å¤„ç†ç”¨æˆ·è¯·æ±‚</span>  
<span class="err">#</span><span class="n">ä»¥ä¸‹æ˜¯locationçš„ä¸€èˆ¬é…ç½®é¡¹</span>  
<span class="err">#</span><span class="mi">1</span><span class="err">ã€</span><span class="n">ä»¥rootæ–¹å¼è®¾ç½®èµ„æºè·¯å¾„</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">root</span> <span class="n">path</span><span class="o">;</span>  
<span class="err">#</span><span class="mi">2</span><span class="err">ã€</span><span class="n">ä»¥aliasæ–¹å¼è®¾ç½®èµ„æºè·¯å¾„</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">alias</span> <span class="n">path</span><span class="o">;</span>  
<span class="err">#</span><span class="mi">3</span><span class="err">ã€</span><span class="n">è®¿é—®é¦–é¡µ</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">index</span> <span class="n">file</span><span class="o">...;</span>  
<span class="err">#</span><span class="mi">4</span><span class="err">ã€</span><span class="n">æ ¹æ®HTTPè¿”å›ç é‡å®šå‘é¡µé¢</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">error_page</span> <span class="n">code</span> <span class="o">[</span><span class="n">code</span><span class="o">...]</span> <span class="o">[=</span> <span class="o">|</span> <span class="o">=</span><span class="n">answer</span><span class="o">-</span><span class="n">code</span><span class="o">]</span> <span class="n">uri</span> <span class="o">|</span> <span class="nd">@named_location</span><span class="o">;</span>  
<span class="err">#</span><span class="mi">5</span><span class="err">ã€</span><span class="n">æ˜¯å¦å…è®¸é€’å½’ä½¿ç”¨error_page</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">recursive_error_pages</span> <span class="o">[</span><span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">];</span>  
<span class="err">#</span><span class="mi">6</span><span class="err">ã€</span><span class="n">try_files</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•æ ¼å¼</span><span class="err">ï¼š</span><span class="n">try_files</span> <span class="n">path1</span> <span class="o">[</span><span class="n">path2</span><span class="o">]</span> <span class="n">uri</span><span class="o">;</span>  

<span class="cm">/* æ–‡ä»¶è·¯å¾„çš„å®šä¹‰ */</span>

<span class="err">#</span><span class="n">rootæ–¹å¼è®¾ç½®èµ„æºè·¯å¾„</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">root</span> <span class="n">path</span><span class="o">;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">root</span> <span class="n">html</span><span class="o">;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span><span class="err">ã€</span><span class="n">http</span><span class="err">ã€</span><span class="n">location</span><span class="err">ã€</span><span class="k">if</span>

<span class="err">#</span><span class="n">ä»¥aliasæ–¹å¼è®¾ç½®èµ„æºè·¯å¾„</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">alias</span> <span class="n">path</span><span class="o">;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">location</span>

<span class="err">#</span><span class="n">è®¿é—®ä¸»é¡µ</span>
<span class="err">#</span><span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">index</span>    <span class="n">file</span><span class="o">...;</span>
<span class="err">#</span><span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">index</span>    <span class="n">index</span><span class="o">.</span><span class="na">html</span><span class="o">;</span>
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span><span class="n">æ ¹æ®HTTPè¿”å›ç é‡å®šå‘é¡µé¢</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">error_page</span> <span class="n">code</span> <span class="o">[</span><span class="n">code</span><span class="o">...]</span> <span class="o">[=</span> <span class="o">|</span> <span class="o">=</span><span class="n">answer</span><span class="o">-</span><span class="n">code</span><span class="o">]</span> <span class="n">uri</span> <span class="o">|</span> <span class="nd">@named_location</span><span class="o">;</span>  
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span><span class="err">ã€</span><span class="n">http</span><span class="err">ã€</span><span class="n">location</span><span class="err">ã€</span><span class="k">if</span>

<span class="err">#</span><span class="n">æ˜¯å¦å…è®¸é€’å½’ä½¿ç”¨error_page</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">recursive_error_pages</span> <span class="o">[</span><span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">];</span>  
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span><span class="n">try_files</span>  
<span class="err">#</span>   <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">try_files</span> <span class="n">path1</span> <span class="o">[</span><span class="n">path2</span><span class="o">]</span> <span class="n">uri</span><span class="o">;</span>  
<span class="err">#</span><span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="cm">/* å†…å­˜åŠç£ç›˜èµ„æºåˆ†é… */</span>

<span class="err">#</span> <span class="no">HTTP</span> <span class="n">åŒ…ä½“åªå­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_body_in_file_only</span>    <span class="n">on</span> <span class="o">|</span> <span class="n">clean</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_body_in_file_only</span>  <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="no">HTTP</span> <span class="n">åŒ…ä½“å°½é‡å†™å…¥åˆ°ä¸€ä¸ªå†…å­˜bufferä¸­</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_body_single_buffer</span>   <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_body_single_buffer</span>   <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">å­˜å‚¨</span> <span class="no">HTTP</span> <span class="n">å¤´éƒ¨çš„å†…å­˜bufferå¤§å°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_header_buffer_size</span>   <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_header_buffer_size</span>   <span class="mi">1</span><span class="n">k</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="err">#</span> <span class="n">å­˜å‚¨è¶…å¤§</span> <span class="no">HTTP</span> <span class="n">å¤´éƒ¨çš„å†…å­˜bufferå¤§å°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">large_client_header_buffer_size</span>   <span class="n">number</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">large_client_header_buffer_size</span>   <span class="mi">4</span>   <span class="mi">8</span><span class="n">k</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="err">#</span> <span class="n">å­˜å‚¨</span> <span class="no">HTTP</span> <span class="n">åŒ…ä½“çš„å†…å­˜bufferå¤§å°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_body_buffer_size</span>   <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_body_buffer_size</span>   <span class="mi">8</span><span class="n">k</span><span class="o">/</span><span class="mi">16</span><span class="n">k</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="no">HTTP</span> <span class="n">åŒ…ä½“çš„ä¸´æ—¶å­˜æ”¾ç›®å½•</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_body_temp_path</span>   <span class="n">dir</span><span class="o">-</span><span class="n">path</span>    <span class="o">[</span><span class="n">level1</span> <span class="o">[</span><span class="n">level2</span> <span class="o">[</span><span class="n">level3</span><span class="o">]]];</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_body_temp_path</span>   <span class="n">client_body_temp</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">å­˜å‚¨</span> <span class="no">TCP</span> <span class="n">æˆåŠŸå»ºç«‹è¿æ¥çš„å†…å­˜æ± å¤§å°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">connection_pool_size</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">connection_pool_size</span>    <span class="mi">256</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="err">#</span> <span class="n">å­˜å‚¨</span> <span class="no">TCP</span> <span class="n">è¯·æ±‚è¿æ¥çš„å†…å­˜æ± å¤§å°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">request_pool_size</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">request_pool_size</span>    <span class="mi">4</span><span class="n">k</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="cm">/* ç½‘ç»œè¿æ¥è®¾ç½® */</span>

<span class="err">#</span> <span class="n">è¯»å–</span> <span class="no">HTTP</span> <span class="n">å¤´éƒ¨çš„è¶…æ—¶æ—¶é—´</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_header_timeout</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_header_timeout</span>   <span class="mi">60</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">è¯»å–</span> <span class="no">HTTP</span> <span class="n">åŒ…ä½“çš„è¶…æ—¶æ—¶é—´</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_body_timeout</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_body_timeout</span>   <span class="mi">60</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">å‘é€å“åº”çš„è¶…æ—¶æ—¶é—´</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">send_timeout</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">send_timeout</span>   <span class="mi">60</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="no">TCP</span> <span class="n">è¿æ¥çš„è¶…æ—¶é‡ç½®</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">reset_timeout_connection</span>   <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">reset_timeout_connection</span>   <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ§åˆ¶å…³é—­</span> <span class="no">TCP</span> <span class="n">è¿æ¥çš„æ–¹å¼</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">lingering_close</span> <span class="n">off</span> <span class="o">|</span> <span class="n">on</span> <span class="o">|</span> <span class="n">always</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">lingering_close</span> <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>
<span class="err">#</span> <span class="n">always</span> <span class="n">è¡¨ç¤ºå…³é—­è¿æ¥ä¹‹å‰æ— æ¡ä»¶å¤„ç†è¿æ¥ä¸Šæ‰€æœ‰ç”¨æˆ·æ•°æ®</span><span class="err">ï¼›</span>
<span class="err">#</span> <span class="n">off</span> <span class="n">è¡¨ç¤ºä¸å¤„ç†</span><span class="err">ï¼›</span><span class="n">on</span> <span class="n">ä¸€èˆ¬ä¼šå¤„ç†</span><span class="err">ï¼›</span>

<span class="err">#</span> <span class="n">lingering_time</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">lingering_time</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">lingering_time</span>   <span class="mi">30</span><span class="n">s</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">lingering_timeout</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">lingering_timeout</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">lingering_time</span>   <span class="mi">5</span><span class="n">s</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">å¯¹æŸäº›æµè§ˆå™¨ç¦æ­¢keepaliveåŠŸèƒ½</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">keepalive_disable</span>   <span class="o">[</span><span class="n">mise6</span> <span class="o">|</span> <span class="n">safari</span> <span class="o">|</span> <span class="n">none</span><span class="o">]...</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">keepalive_disable</span>   <span class="n">mise6</span>  <span class="n">safari</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">keepaliveè¶…æ—¶æ—¶é—´</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">keepalive_timeout</span>   <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">keepalive_timeout</span>   <span class="mi">75</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">keepaliveé•¿è¿æ¥ä¸Šå…è®¸æœ€å¤§è¯·æ±‚æ•°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">keepalive_requests</span>  <span class="n">n</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">keepalive_requests</span>  <span class="mi">100</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">tcp_nodelay</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">tcp_nodelay</span> <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">tcp_nodelay</span> <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">tcp_nopush</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">tcp_nopush</span> <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">tcp_nopush</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="cm">/* MIME ç±»å‹è®¾ç½® */</span>

<span class="err">#</span> <span class="no">MIME</span> <span class="n">type</span> <span class="n">ä¸æ–‡ä»¶æ‰©å±•çš„æ˜ å°„</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">type</span><span class="o">{...}</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>
<span class="err">#</span> <span class="n">å¤šä¸ªæ‰©å±•åå¯æ˜ å°„åˆ°åŒä¸€ä¸ª</span> <span class="no">MIME</span> <span class="n">type</span>

<span class="err">#</span> <span class="n">é»˜è®¤</span> <span class="no">MIME</span> <span class="n">type</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">default_type</span>    <span class="no">MIME</span><span class="o">-</span><span class="n">type</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">default_type</span>    <span class="n">text</span><span class="o">/</span><span class="n">plain</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">type_hash_bucket_size</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">type_hash_bucket_size</span>   <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">type_hash_bucket_size</span>   <span class="mi">32</span> <span class="o">|</span> <span class="mi">64</span> <span class="o">|</span> <span class="mi">128</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">type_hash_max_size</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">type_hash_max_size</span>   <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">type_hash_max_size</span>   <span class="mi">1024</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="cm">/* é™åˆ¶å®¢æˆ·ç«¯è¯·æ±‚ */</span>

<span class="err">#</span> <span class="n">æŒ‰</span> <span class="no">HTTP</span> <span class="n">æ–¹æ³•åé™åˆ¶ç”¨æˆ·è¯·æ±‚</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">limit_except</span>    <span class="n">method</span><span class="o">...{...}</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">location</span>
<span class="err">#</span> <span class="n">method</span> <span class="n">çš„å–å€¼å¦‚ä¸‹</span><span class="err">ï¼š</span>
<span class="err">#</span> <span class="no">GET</span><span class="err">ã€</span><span class="no">HEAD</span><span class="err">ã€</span><span class="no">POST</span><span class="err">ã€</span><span class="no">PUT</span><span class="err">ã€</span><span class="no">DELETE</span><span class="err">ã€</span><span class="no">MKCOL</span><span class="err">ã€</span><span class="no">COPY</span><span class="err">ã€</span><span class="no">MOVE</span><span class="err">ã€</span><span class="no">OPTIONS</span><span class="err">ã€</span>
<span class="err">#</span> <span class="no">PROPFIND</span><span class="err">ã€</span><span class="no">PROPPATCH</span><span class="err">ã€</span><span class="no">LOCK</span><span class="err">ã€</span><span class="no">UNLOCK</span><span class="err">ã€</span><span class="no">PATCH</span>

<span class="err">#</span> <span class="no">HTTP</span> <span class="n">è¯·æ±‚åŒ…ä½“çš„æœ€å¤§å€¼</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">client_max_body_size</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">client_max_body_size</span>    <span class="mi">1</span><span class="n">m</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">å¯¹è¯·æ±‚é™åˆ¶é€Ÿåº¦</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">limit_rate</span>  <span class="n">speed</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">limit_rate</span>  <span class="mi">0</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span><span class="err">ã€</span><span class="k">if</span>
<span class="err">#</span> <span class="mi">0</span> <span class="n">è¡¨ç¤ºä¸é™é€Ÿ</span>

<span class="err">#</span> <span class="n">limit_rate_afterè§„å®šæ—¶é—´åé™é€Ÿ</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">limit_rate_after</span>  <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">limit_rate_after</span>    <span class="mi">1</span><span class="n">m</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—èŒƒå›´</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span><span class="err">ã€</span><span class="k">if</span>

<span class="cm">/* æ–‡ä»¶æ“ä½œçš„ä¼˜åŒ– */</span>

<span class="err">#</span> <span class="n">sendfileç³»ç»Ÿè°ƒç”¨</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">sendfile</span>    <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">sendfile</span>    <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="no">AIO</span> <span class="n">ç³»ç»Ÿè°ƒç”¨</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">aio</span> <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">aio</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">directio</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">directio</span>    <span class="n">size</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">directio</span>    <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">directio_alignment</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">directio_alignment</span>    <span class="n">size</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">directio_alignment</span>    <span class="mi">512</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ‰“å¼€æ–‡ä»¶ç¼“å­˜</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">open_file_cache</span> <span class="n">max</span><span class="o">=</span><span class="no">N</span> <span class="o">[</span><span class="n">inactive</span><span class="o">=</span><span class="n">time</span><span class="o">]</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">open_file_cache</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ˜¯å¦ç¼“å­˜æ‰“å¼€æ–‡ä»¶çš„é”™è¯¯ä¿¡æ¯</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">open_file_cache_errors</span>  <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">open_file_cache_errors</span>  <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">ä¸è¢«æ·˜æ±°çš„æœ€å°è®¿é—®æ¬¡æ•°</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">open_file_cache_min_user</span>  <span class="n">number</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">open_file_cache_min_user</span>  <span class="mi">1</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ£€éªŒç¼“å­˜ä¸­å…ƒç´ æœ‰æ•ˆæ€§çš„é¢‘ç‡</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">open_file_cache_valid</span>  <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">open_file_cache_valid</span>  <span class="mi">60</span><span class="n">s</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="cm">/* å®¢æˆ·è¯·æ±‚çš„ç‰¹æ®Šå¤„ç† */</span>

<span class="err">#</span> <span class="n">å¿½ç•¥ä¸åˆæ³•çš„</span> <span class="no">HTTP</span> <span class="n">å¤´éƒ¨</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">ignore_invalid_headers</span>  <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">ignore_invalid_headers</span>  <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="err">#</span> <span class="no">HTTP</span> <span class="n">å¤´éƒ¨æ˜¯å¦å…è®¸ä¸‹åˆ’çº¿</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">underscores_in_headers</span>  <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">underscores_in_headers</span>  <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span>

<span class="err">#</span> <span class="n">If_Modified_Since</span> <span class="n">å¤´éƒ¨çš„å¤„ç†ç­–ç•¥</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">if_modified_since</span>   <span class="o">[</span><span class="n">off</span> <span class="o">|</span> <span class="n">exact</span> <span class="o">|</span> <span class="n">before</span><span class="o">]</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">if_modified_since</span>   <span class="n">exact</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ–‡ä»¶æœªæ‰¾åˆ°æ—¶æ˜¯å¦è®°å½•åˆ°erroræ—¥å¿—</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">log_not_found</span>   <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">log_not_found</span>   <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">æ˜¯å¦åˆå¹¶ç›¸é‚»çš„</span><span class="err">â€œ</span><span class="o">/</span><span class="err">â€</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">merge_slashes</span>   <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">merge_slashes</span>   <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="nc">DNSè§£æåœ°å€</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">resolver</span>    <span class="n">address</span><span class="o">...;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="nc">DNSè§£æçš„è¶…æ—¶æ—¶é—´</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">resolver_timeout</span>    <span class="n">time</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">resolver_timeout</span>    <span class="mi">30</span><span class="n">s</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

<span class="err">#</span> <span class="n">è¿”å›é”™è¯¯é¡µé¢æ˜¯å¦åœ¨serverä¸­æ³¨æ˜Nginxç‰ˆæœ¬</span>
<span class="err">#</span> <span class="n">è¯­æ³•</span><span class="err">ï¼š</span><span class="n">server_tokens</span>   <span class="n">on</span> <span class="o">|</span> <span class="n">off</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é»˜è®¤</span><span class="err">ï¼š</span><span class="n">server_tokens</span>   <span class="n">on</span><span class="o">;</span>
<span class="err">#</span> <span class="n">é…ç½®å—</span><span class="err">ï¼š</span><span class="n">http</span><span class="err">ã€</span><span class="n">server</span><span class="err">ã€</span><span class="n">location</span>

</code></pre></div></div>

<h2 id="å‡ºç°swap-file-etcnginxnginxconfswp-already-existsæ˜¯ä»€ä¹ˆåŸå› ">å‡ºç°Swap file â€œ/etc/nginx/.nginx.conf.swpâ€ already exists!æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</h2>

<p>åœ¨å†™çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†æ„å¤–æ–­ç”µï¼Œé“¾æ¥å¤±æ•ˆï¼Œsshå®¢æˆ·ç«¯å¼‚å¸¸å…³é—­ç­‰ç­‰ï¼ŒæœåŠ¡å™¨å¤‡ä»½äº†å†™çš„æ“ä½œï¼Œä½†æ˜¯æœªå†™å…¥çœŸæ­£çš„æ–‡ä»¶é‡Œé¢ã€‚
ä½†æ˜¯ç”±äºå†™çš„è¿‡ç¨‹ä¸­å®¢æˆ·ç«¯è¿æ¥å¤±æ•ˆäº†ï¼Œå†…å®¹å¯ä»¥é‡å†™</p>

<p>æˆ‘ä»¬å¯ä»¥å°†
/etc/nginx/.nginx.conf.swpÂ 
è¿™ä¸ªæ–‡ä»¶ä¿å­˜ä¸‹æ¥</p>

<p>mv /etc/nginx/.nginx.conf.swp /etc/nginx/nginx_swp_bak.conf
ç„¶åå†é‡æ–°ç¼–è¾‘ï¼Œå°±å¯ä»¥äº†</p>

<p>vim /etc/nginx/nginx.conf
è‡³äºä¿å­˜çš„é‚£ä¸ªæ–‡ä»¶çœ‹æƒ…å†µï¼Œæ²¡å•¥ç”¨å¤„å°±rm æ‰</p>
:ET