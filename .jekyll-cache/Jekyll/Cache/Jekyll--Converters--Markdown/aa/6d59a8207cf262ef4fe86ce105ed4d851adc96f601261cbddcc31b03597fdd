I"ÿ_<p>æœ€è¿‘åœ¨å­¦ä¹ æ€ä¹ˆå°† Gecko åµŒå…¥åˆ°è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸‹è½½äº†ä¸€ä»½æ¯”è¾ƒæ—©ä¸€ç‚¹çš„æºç åœ¨å¯¹ç…§å®˜æ–¹æ–‡æ¡£ç—›è‹¦åœ°æ¨è¿›â€”â€”ç½‘ä¸Šç›¸å…³èµ„æ–™ç¡®å®ç›¸å½“ç¼ºä¹ï¼Œéš¾é“å¤§å®¶éƒ½å„ç§ webkit å»äº†ï¼Ÿæˆ‘çš„è®¡åˆ’æ˜¯å…ˆå¼„æ¸…æ€ä¹ˆç”¨ï¼Œè®©ç¨‹åºè·‘èµ·æ¥ï¼Œç„¶åå†æ ¹æ®å®˜æ–¹æ–‡æ¡£ç»“æ„è¯´æ˜å»å®šåˆ¶ï¼Œå‰Šå‡æ‰ä¸éœ€è¦çš„éƒ¨åˆ†ï¼ŒæŠ˜è…¾è¿™ä¸ªç§»æ¤å°±èŠ±äº†æˆ‘ä¸å°‘æ—¶é—´ï¼Œæœæ–­è§‰å¾—åº”è¯¥è·Ÿå¤§å®¶åˆ†äº«ä¹‹ã€‚åºŸè¯ä¸è¯´,ç›´æ¥ä¸Šè¿‡ç¨‹ã€‚</p>

<h3 id="ä¸‹è½½xulrunneræºç å¹¶ç¼–è¯‘">ä¸‹è½½xulrunneræºç å¹¶ç¼–è¯‘ã€‚</h3>

<p>æˆ‘è¿™é‡Œç”¨çš„ 1.9.2rc1 ç‰ˆæœ¬ï¼Œå¯¹åº” firefox 3.6.Xã€‚</p>

<p>æºç ä¸‹è½½åœ°å€ï¼š<a href="ftp://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/1.9.2rc1/source/">ftp://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/1.9.2rc1/source/</a></p>

<p>ç¼–è¯‘ç¯å¢ƒ mozilla-build ä¸‹è½½åœ°å€ï¼š<a href="http://ftp.mozilla.org/pub/mozilla.org/mozilla/libraries/win32/MozillaBuildSetup-1.3.exe">http://ftp.mozilla.org/pub/mozilla.org/mozilla/libraries/win32/MozillaBuildSetup-1.3.exe</a></p>

<p>åœ¨è§£å‹çš„æºç æ ¹ç›®å½•å†…æ–°å»ºä¸€ä¸ª <code class="language-plaintext highlighter-rouge">.mozconfig</code> æ–‡ä»¶ï¼Œæˆ‘ä½¿ç”¨çš„å†…å®¹æ˜¯ï¼ˆå…¶ä¸­æœ‰ç”¨çš„å°±æ˜¯ç»„å»ºç›®æ ‡æ˜¯ xulrunnerï¼Œå¯åŠ¨ tests ä»¥ç”Ÿæˆç¤ºä¾‹ç¨‹åºï¼‰ï¼š</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">mk_add_options</span> <span class="nv">MOZ_CO_PROJECT</span><span class="o">=</span>xulrunner
<span class="err">mk_add_options</span> <span class="nv">MOZ_OBJDIR</span><span class="o">=</span>@TOPSRCDIR@/obj-xulrunner
<span class="err">ac_add_options</span> <span class="nv">--enable-application</span><span class="o">=</span>xulrunner
<span class="c">#Uncomment the following line if you don't want to build JavaXPCOM:
</span><span class="err">ac_add_options</span> <span class="err">--disable-javaxpcom</span>
<span class="err">ac_add_options</span> <span class="err">--disable-optimize</span>
<span class="err">ac_add_options</span> <span class="err">--enable-debug</span>
<span class="err">ac_add_options</span> <span class="err">--disable-vista-sdk-requirements</span>
<span class="err">ac_add_options</span> <span class="nv">--with-windows-version</span><span class="o">=</span>600
<span class="err">ac_add_options</span> <span class="err">--enable-tests</span>
</code></pre></div></div>

<p>è¿è¡Œ mozilla-build 1.3 ä¸­çš„ start-msvc9.batï¼ˆå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ Visual Studio 2008ï¼‰ï¼Œåˆ‡æ¢åˆ°æºç æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œ <code class="language-plaintext highlighter-rouge">./configure</code>ï¼Œç„¶å <code class="language-plaintext highlighter-rouge">make</code>ã€‚ç­‰å¾…å‡ ä¸ªå°æ—¶ï¼ˆæˆ‘çš„æ˜¯ç”¨äº†å››ä¸ªå°æ—¶å·¦å³ï¼‰å°± OK äº†ã€‚</p>

<h3 id="æ³¨å†Œgregeckoè¿è¡Œæ—¶ç¯å¢ƒ">æ³¨å†ŒGREï¼ˆGeckoè¿è¡Œæ—¶ç¯å¢ƒï¼‰ã€‚</h3>

<p>åœ¨ç»è¿‡ä¸Šé¢ç¬¬ä¸€æ­¥çš„ç¼–è¯‘åï¼Œä¼šåœ¨æºç æ ¹ç›®å½•ä¸‹ç”Ÿæˆåä¸º dist çš„æ–‡ä»¶å¤¹ã€‚<code class="language-plaintext highlighter-rouge">æºç æ ¹/dist/bin/</code> ç›®å½•ä¸‹ç°åœ¨æœ‰ xulrunner.exe ç­‰ç¨‹åºï¼Œåœ¨ cmd ä¸‹è¿è¡Œ <code class="language-plaintext highlighter-rouge">xulrunner.exe --register-global</code> æ³¨å†Œ GREã€‚è¿™æ—¶å€™å®é™…ä¸Šå°±å¯ä»¥è·‘ <code class="language-plaintext highlighter-rouge">æºç æ ¹/embedding/tests/winEmbed/winEmbed.exe</code> ç¨‹åºäº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç›®çš„æ˜¯åœ¨ VC ä¸‹è‡ªå·±çš„å·¥ç¨‹é‡ŒåµŒå…¥ Geckoï¼Œæ‰€ä»¥éœ€è¦å°è¯•å°†è¿™ä¸ªç¤ºä¾‹å·¥ç¨‹ winEmbed ç§»æ¤åˆ° VC ä¸­ã€‚</p>

<h3 id="é‡ç‚¹æ¥äº†å°†winembedç§»æ¤åˆ°vcä¸­">é‡ç‚¹æ¥äº†ï¼Œå°†winEmbedç§»æ¤åˆ°VCä¸­ã€‚</h3>

<p>ï¼ˆ1ï¼‰æ–°å»ºå·¥ç¨‹ <code class="language-plaintext highlighter-rouge">MozillaDemo</code>ï¼Œå°† winEmbed æ–‡ä»¶å¤¹ä¸‹çš„ resource.hã€SMALL.ICOã€WebBrowserChrome.cppã€WebBrowserChrome.hã€WindowCreator.cppã€WindowCreator.hã€winEmbed.cppã€winEmbed.hã€winEmbed.ICOã€winEmbed.rc å¼•å…¥å·¥ç¨‹ã€‚ç¼–è¯‘ä¹‹ï¼Œä½ ä¼šå‘ç° N å¤šé”™è¯¯â€¦â€¦</p>

<p>ï¼ˆ2ï¼‰åœ¨ VC++ ç›®å½•ä¸­ï¼Œinclude é‡ŒåŠ å…¥ <code class="language-plaintext highlighter-rouge">æºç æ ¹/dist/include</code>ï¼ŒLibrary é‡ŒåŠ å…¥ <code class="language-plaintext highlighter-rouge">æºç æ ¹/dist/lib</code>ï¼Œbin é‡ŒåŠ å…¥ <code class="language-plaintext highlighter-rouge">æºç æ ¹/dist/bin</code>ã€‚</p>

<p>ï¼ˆ3ï¼‰ä¿®æ”¹ä¸€äº›ç¼–è¯‘é€‰é¡¹ã€‚å¦‚åœ¨é¢„ç¼–è¯‘é€‰é¡¹é‡Œæ·»åŠ  XPCOM_GLUEï¼ŒXP_WINï¼Œ_CRT_SECURE_NO_WARNINGSã€‚å°† Project-&gt;Propeties-&gt;Configuration Properties-&gt;C/C++-&gt;Language ä¸‹çš„ Treat wchar_t as Built-in Type è®¾ä¸º No (/Zc:wchar_t-)ï¼Œåœ¨å¼•å…¥åº“é‡Œæ·»åŠ  xpcomglue.libã€‚æ€»ä¹‹è®©ç¼–è¯‘å‘½ä»¤è¡Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼ˆå…·ä½“ä¸ºä½•åé¢è§£é‡Šï¼‰ï¼š</p>

<p>ä»é¡¹ç›®å±æ€§çš„ C/C++ é‡Œçœ‹åˆ°çš„ç¼–è¯‘å‘½ä»¤è¡Œï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/O2 /Oi /GL /D "WIN32" /D "NDEBUG" /D "_WINDOWS" /D "XPCOM_GLUE" /D "XP_WIN" /D "_CRT_SECURE_NO_WARNINGS" /D "_MBCS" /FD /EHsc /MD /Gy /Zc:wchar_t- /Fo"Release\\" /Fd"Release\vc90.pdb" /W3 /nologo /c /Zi /TP /errorReport:prompt 
</code></pre></div></div>

<p>ä»é¡¹ç›®å±æ€§çš„ Linker é‡Œçœ‹åˆ°çš„é“¾æ¥å‘½ä»¤è¡Œï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/OUT:"E:\MZ_Test_Code\MozillaDemo\Release\MozillaDemo.exe" /INCREMENTAL:NO /NOLOGO /MANIFEST /MANIFESTFILE:"Release\MozillaDemo.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"e:\MZ_Test_Code\MozillaDemo\Release\MozillaDemo.pdb" /OPT:REF /OPT:ICF /LTCG /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:PROMPT xpcomglue.lib  kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib
</code></pre></div></div>

<p>ï¼ˆ4ï¼‰åœ¨ winEmbed.cpp æ–‡ä»¶é‡Œæ·»åŠ ä¸€å¥</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#pragma comment(lib, "D:/1.9.2rc1/xulrunner-1.9.2rc1.source/mozilla-1.9.2/profile/dirserviceprovider/standalone/profdirserviceprovidersa_s.lib")
</span></code></pre></div></div>

<p>å¤§åŠŸå‘Šæˆï¼Œç¼–è¯‘æˆåŠŸ 0 warning, 0 errorã€‚æ­¤æ—¶çš„ç¨‹åºä¹Ÿå¯ä»¥åœ¨åˆ«çš„æœºå­ä¸Šè¿è¡Œï¼Œä½†æ˜¯éœ€è¦å°† xulrunner.exe åŠå…¶ä¾èµ–æ–‡ä»¶æ‹·åˆ°åˆ«çš„æœºå­ä¸Šå¹¶æ³¨å†Œ GREã€‚</p>

<p>ç¨‹åºè¿è¡Œç¤ºæ„å›¾ï¼š</p>

<p><img src="/images/posts/gecko/gecko_embed.gif" width="80%" alt="gecko embed program run demo" /></p>

<p>åœ¨è‡ªå·±ç¼–è¯‘çš„ xulrunner ç¯å¢ƒä¸‹è·‘ä¼šäº§ç”Ÿä¸‹é¢ä¸¤ç±»é”™è¯¯ï¼Œå…ˆå¿½ç•¥ä¹‹è®©ç¨‹åºè·‘èµ·æ¥ã€‚ï¼ˆç”¨å®˜æ–¹æä¾›çš„ xulrunner-sdk é‡Œçš„ç¨‹åºæ¥æ³¨å†Œ GRE å¹¶è¿è¡Œç¨‹åºæ— æŠ¥é”™ï¼‰</p>

<p><img src="/images/posts/gecko/gecko_embed_err1.gif" width="80%" alt="gecko embed program run error 1" /></p>

<p><img src="/images/posts/gecko/gecko_embed_err2.gif" width="80%" alt="gecko embed program run error 2" /></p>

<p>è‡³äºä¸ºä»€ä¹ˆè¦åšï¼ˆ3ï¼‰å’Œï¼ˆ4ï¼‰ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p>

<ol>
  <li>
    <p>ä¸ºä»€ä¹ˆè¦æ·»åŠ é¢„ç¼–è¯‘é€‰é¡¹ XPCOM_GLUE</p>

    <p>åœ¨åŸç‰ˆçš„ winEmbed ç›®å½•ä¸‹ï¼Œæœ‰ makefile æ–‡ä»¶ï¼Œé‡Œé¢æœ‰DEFINES += -DXPCOM_GLUEè¿™ä¹ˆä¸€å¥ã€‚</p>
  </li>
  <li>
    <p>ä¸ºä»€ä¹ˆè¦æ·»åŠ é¢„ç¼–è¯‘é€‰é¡¹ XP_WIN</p>

    <p>åœ¨ winEmbed/makefile æ–‡ä»¶é‡Œï¼Œæœ‰ include $(DEPTH)/config/autoconf.mk è¿™ä¹ˆä¸€å¥ï¼Œè€Œåœ¨è¿™ä¸ª autoconf.mk é‡Œå¯ä»¥çœ‹åˆ°ä¸€å¤§ä¸²çš„é¢„ç¼–è¯‘é€‰é¡¹ï¼Œæˆ‘è¯•äº†å¤šç•ªæ‰å¾—å‡ºè¿™ä¸ªéåŠ ä¸å¯çš„ç»“è®ºâ€¦â€¦ï¼ˆè¯•ï¼ï¼ï¼å†ï¼ï¼‰</p>
  </li>
  <li>
    <p>ä¸ºä»€ä¹ˆè¦æ·»åŠ å¼•å…¥åº“ xpcomglue.libï¼Œä¸ºä»€ä¹ˆè¦æœ‰ï¼ˆ4ï¼‰æ­¥éª¤</p>

    <p>åœ¨ winEmbed/makefile æ–‡ä»¶é‡Œï¼Œæœ‰</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LIBS = \
$(DEPTH)/profile/dirserviceprovider/standalone/$(LIB_PREFIX)profdirserviceprovidersa_s.$(LIB_SUFFIX) \
$(XPCOM_STANDALONE_GLUE_LDOPTS) \
$(NULL)
</code></pre></div>    </div>

    <p>è¿™ä¹ˆä¸€æ®µï¼Œå¾ˆæ˜¾ç„¶æç¤ºæˆ‘ä»¬å¼•å…¥åº“ profdirserviceprovidersa_sï¼Œç„¶ååœ¨ autoconf.mk æ–‡ä»¶é‡Œå¯ä»¥çœ‹åˆ° XPCOM_STANDALONE_GLUE_LDOPTS = $(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue.$(LIB_SUFFIX) è¿™ä¹ˆä¸€ä¸ªå®šä¹‰ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å¼•å…¥åº“ xpcomglueã€‚</p>
  </li>
  <li>
    <p>ä¸ºä»€ä¹ˆè¦å°† Project-&gt;Propeties-&gt;Configuration Properties-&gt;C/C++-&gt;Language ä¸‹çš„ Treat wchar_t as Built-in Type è®¾ä¸º No (/Zc:wchar_t-)</p>

    <p>å¾ˆç®€å•ï¼Œå› ä¸ºç¼–è¯‘æŠ¥é”™æç¤ºå‘—â€¦â€¦</p>

    <p>ä¸æ‰§è¡Œè¿™äº›æ“ä½œå°†äº§ç”Ÿçš„é”™è¯¯ï¼š</p>

    <p>ä¸å°† Project-&gt;Propeties-&gt;Configuration Properties-&gt;C/C++-&gt;Language ä¸‹çš„ Treat wchar_t as Built-in Type è®¾ä¸º No (/Zc:wchar_t-) å°†æŠ¥é”™</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: wchar_t const * __thiscall nsAString::BeginReading(void)const " (?BeginReading@nsAString@@QBEPB_WXZ)
</code></pre></div>    </div>

    <p>æ‹¿æ‰é¢„ç¼–è¯‘é€‰é¡¹ <code class="language-plaintext highlighter-rouge">XP_WIN</code> ä¼šäº§ç”Ÿé”™è¯¯</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __thiscall nsCOMPtr_base::assign_from_helper(class nsCOMPtr_helper const &amp;,struct nsID const &amp;)" (?assign_from_helper@nsCOMPtr_base@@QAEXABVnsCOMPtr_helper@@ABUnsID@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __thiscall nsCOMPtr_base::assign_from_qi(class nsQueryInterface,struct nsID const &amp;)" (?assign_from_qi@nsCOMPtr_base@@QAEXVnsQueryInterface@@ABUnsID@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __thiscall nsCOMPtr_base::assign_with_AddRef(class nsISupports *)" (?assign_with_AddRef@nsCOMPtr_base@@QAEXPAVnsISupports@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: virtual unsigned int __thiscall nsCreateInstanceByContractID::operator()(struct nsID const &amp;,void * *)const " (??RnsCreateInstanceByContractID@@UBEIABUnsID@@PAPAX@Z)
1&gt;WindowCreator.obj : error LNK2001: unresolved external symbol "unsigned int __cdecl NS_TableDrivenQI(void *,struct QITableEntry const *,struct nsID const &amp;,void * *)" (?NS_TableDrivenQI@@YAIPAXPBUQITableEntry@@ABUnsID@@PAPAX@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: void __thiscall nsCOMPtr_base::assign_from_gs_contractid_with_error(class nsGetServiceByContractIDWithError const &amp;,struct nsID const &amp;)" (?assign_from_gs_contractid_with_error@nsCOMPtr_base@@QAEXABVnsGetServiceByContractIDWithError@@ABUnsID@@@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: void __thiscall nsCOMPtr_base::assign_from_gs_contractid(class nsGetServiceByContractID,struct nsID const &amp;)" (?assign_from_gs_contractid@nsCOMPtr_base@@QAEXVnsGetServiceByContractID@@ABUnsID@@@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: virtual unsigned int __thiscall nsGetInterface::operator()(struct nsID const &amp;,void * *)const " (??RnsGetInterface@@UBEIABUnsID@@PAPAX@Z)
</code></pre></div>    </div>

    <p>æ‹¿æ‰é¢„ç¼–è¯‘é€‰é¡¹ <code class="language-plaintext highlighter-rouge">XPCOM_GLUE</code> ä¼šäº§ç”Ÿé”™è¯¯</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1&gt;.\winEmbed.cpp(48) : error C2146: syntax error : missing ';' before identifier 'XRE_InitEmbedding'
1&gt;.\winEmbed.cpp(48) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1&gt;.\winEmbed.cpp(48) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1&gt;.\winEmbed.cpp(48) : error C2365: 'XRE_InitEmbedding' : redefinition; previous definition was 'function'
1&gt;        D:\1.9.2rc1\xulrunner-1.9.2rc1.source\mozilla-1.9.2\dist\include\nsXULAppAPI.h(355) : see declaration of 'XRE_InitEmbedding'
1&gt;.\winEmbed.cpp(49) : error C2146: syntax error : missing ';' before identifier 'XRE_TermEmbedding'
1&gt;.\winEmbed.cpp(49) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1&gt;.\winEmbed.cpp(49) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1&gt;.\winEmbed.cpp(49) : error C2365: 'XRE_TermEmbedding' : redefinition; previous definition was 'function'
1&gt;        D:\1.9.2rc1\xulrunner-1.9.2rc1.source\mozilla-1.9.2\dist\include\nsXULAppAPI.h(390) : see declaration of 'XRE_TermEmbedding'
1&gt;.\winEmbed.cpp(191) : error C3861: 'XPCOMGlueStartup': identifier not found
1&gt;.\winEmbed.cpp(209) : error C2659: '=' : function as left operand
1&gt;.\winEmbed.cpp(209) : error C2146: syntax error : missing ';' before identifier 'GetProcAddress'
1&gt;.\winEmbed.cpp(210) : warning C4551: function call missing argument list
1&gt;.\winEmbed.cpp(216) : error C2659: '=' : function as left operand
1&gt;.\winEmbed.cpp(216) : error C2146: syntax error : missing ';' before identifier 'GetProcAddress'
</code></pre></div>    </div>

    <p>æ‹¿æ‰å¼•å…¥åº“ <code class="language-plaintext highlighter-rouge">xpcomglue.lib</code> ä¼šäº§ç”Ÿé”™è¯¯</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_StringContainerFinish
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_StringContainerFinish
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_StringContainerFinish
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringCopy
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: unsigned short const * __thiscall nsAString::BeginReading(void)const " (?BeginReading@nsAString@@QBEPBGXZ)
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol "public: unsigned short const * __thiscall nsAString::BeginReading(void)const " (?BeginReading@nsAString@@QBEPBGXZ)
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol "public: unsigned short const * __thiscall nsAString::BeginReading(void)const " (?BeginReading@nsAString@@QBEPBGXZ)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_StringContainerInit
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_StringContainerInit
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_StringContainerInit
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringSetDataRange
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringToUTF16
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringSetData
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __fastcall nsCOMPtr_base::assign_from_helper(class nsCOMPtr_helper const &amp;,struct nsID const &amp;)" (?assign_from_helper@nsCOMPtr_base@@QAIXABVnsCOMPtr_helper@@ABUnsID@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __fastcall nsCOMPtr_base::assign_from_qi(class nsQueryInterface,struct nsID const &amp;)" (?assign_from_qi@nsCOMPtr_base@@QAIXVnsQueryInterface@@ABUnsID@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: void __fastcall nsCOMPtr_base::assign_with_AddRef(class nsISupports *)" (?assign_with_AddRef@nsCOMPtr_base@@QAIXPAVnsISupports@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: __thiscall nsCOMPtr_base::~nsCOMPtr_base(void)" (??1nsCOMPtr_base@@QAE@XZ)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringContainerInit
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_CStringContainerInit
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringContainerFinish
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_CStringContainerFinish
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: virtual unsigned int __fastcall nsCreateInstanceByContractID::operator()(struct nsID const &amp;,void * *)const " (??RnsCreateInstanceByContractID@@UBIIABUnsID@@PAPAX@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol _NS_CStringGetData
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "protected: void __thiscall nsSupportsWeakReference::ClearWeakReferences(void)" (?ClearWeakReferences@nsSupportsWeakReference@@IAEXXZ)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "public: virtual unsigned int __stdcall nsSupportsWeakReference::GetWeakReference(class nsIWeakReference * *)" (?GetWeakReference@nsSupportsWeakReference@@UAGIPAPAVnsIWeakReference@@@Z)
1&gt;WebBrowserChrome.obj : error LNK2001: unresolved external symbol "class nsIWeakReference * __cdecl NS_GetWeakReference(class nsISupports *,unsigned int *)" (?NS_GetWeakReference@@YAPAVnsIWeakReference@@PAVnsISupports@@PAI@Z)
1&gt;WindowCreator.obj : error LNK2001: unresolved external symbol "unsigned int __fastcall NS_TableDrivenQI(void *,struct QITableEntry const *,struct nsID const &amp;,void * *)" (?NS_TableDrivenQI@@YIIPAXPBUQITableEntry@@ABUnsID@@PAPAX@Z)
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol "unsigned int __fastcall NS_TableDrivenQI(void *,struct QITableEntry const *,struct nsID const &amp;,void * *)" (?NS_TableDrivenQI@@YIIPAXPBUQITableEntry@@ABUnsID@@PAPAX@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: char const * __thiscall nsACString::BeginReading(void)const " (?BeginReading@nsACString@@QBEPBDXZ)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _GRE_GetGREPathWithProperties
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _NS_NewNativeLocalFile
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: void __fastcall nsCOMPtr_base::assign_from_gs_contractid_with_error(class nsGetServiceByContractIDWithError const &amp;,struct nsID const &amp;)" (?assign_from_gs_contractid_with_error@nsCOMPtr_base@@QAIXABVnsGetServiceByContractIDWithError@@ABUnsID@@@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: void __fastcall nsCOMPtr_base::assign_from_gs_contractid(class nsGetServiceByContractID,struct nsID const &amp;)" (?assign_from_gs_contractid@nsCOMPtr_base@@QAIXVnsGetServiceByContractID@@ABUnsID@@@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _NS_CStringContainerInit2
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_CStringContainerInit2
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _XPCOMGlueStartup
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol "public: virtual unsigned int __fastcall nsGetInterface::operator()(struct nsID const &amp;,void * *)const " (??RnsGetInterface@@UBIIABUnsID@@PAPAX@Z)
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _NS_StringContainerInit2
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_StringContainerInit2
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_StringContainerInit2
1&gt;winEmbed.obj : error LNK2001: unresolved external symbol _NS_UTF16ToCString
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_DebugBreak
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_DebugBreak
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_LogAddRef
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_LogRelease
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_StringGetData
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_LogCOMPtrRelease
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_LogCOMPtrRelease
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol _NS_LogCOMPtrAddRef
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol _NS_LogCOMPtrAddRef
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol "public: unsigned int __fastcall nsGetServiceByContractIDWithError::operator()(struct nsID const &amp;,void * *)const " (??RnsGetServiceByContractIDWithError@@QBIIABUnsID@@PAPAX@Z)
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol "public: unsigned int __fastcall nsQueryInterface::operator()(struct nsID const &amp;,void * *)const " (??RnsQueryInterface@@QBIIABUnsID@@PAPAX@Z)
1&gt;profdirserviceprovidersa_s.lib(nsProfileLock.obj) : error LNK2001: unresolved external symbol "public: unsigned int __fastcall nsQueryInterface::operator()(struct nsID const &amp;,void * *)const " (??RnsQueryInterface@@QBIIABUnsID@@PAPAX@Z)
1&gt;profdirserviceprovidersa_s.lib(nsProfileDirServiceProvider.obj) : error LNK2001: unresolved external symbol "public: unsigned int __fastcall nsGetServiceByContractID::operator()(struct nsID const &amp;,void * *)const " (??RnsGetServiceByContractID@@QBIIABUnsID@@PAPAX@Z)
</code></pre></div>    </div>

    <p>æ·»åŠ é¢„ç¼–è¯‘é€‰é¡¹ _CRT_SECURE_NO_WARNINGS ç”¨æ¥æ¶ˆé™¤è­¦å‘Š</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1&gt;e:\mz_test_code\mozillademo\mozillademo\webbrowserchrome.cpp(375) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1&gt;        d:\program files\microsoft visual studio 9.0\vc\include\stdio.h(358) : see declaration of '_snprintf'
1&gt;WindowCreator.cpp
1&gt;winEmbed.cpp
1&gt;e:\mz_test_code\mozillademo\mozillademo\winembed.cpp(163) : warning C4996: 'strncpy': This function or variable may be unsafe. Consider using strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1&gt;        d:\program files\microsoft visual studio 9.0\vc\include\string.h(157) : see declaration of 'strncpy'
1&gt;e:\mz_test_code\mozillademo\mozillademo\winembed.cpp(198) : warning C4996: '_snprintf': This function or variable may be unsafe. Consider using _snprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1&gt;        d:\program files\microsoft visual studio 9.0\vc\include\stdio.h(358) : see declaration of '_snprintf'
1&gt;e:\mz_test_code\mozillademo\mozillademo\winembed.cpp(1086) : warning C4996: 'strncpy': This function or variable may be unsafe. Consider using strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1&gt;        d:\program files\microsoft visual studio 9.0\vc\include\string.h(157) : see declaration of 'strncpy'
</code></pre></div>    </div>

    <p>winEmbed.cppæ–‡ä»¶é‡Œæ·»åŠ #pragma comment(lib, â€œD:/1.9.2rc1/xulrunner-1.9.2rc1.source/mozilla-1.9.2/profile/dirserviceprovider/standalone/profdirserviceprovidersa_s.libâ€)</p>

    <p>å¦åˆ™å°†äº§ç”Ÿé”™è¯¯</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1&gt;winEmbed.obj : error LNK2019: unresolved external symbol "unsigned int __cdecl NS_NewProfileDirServiceProvider(int,class nsProfileDirServiceProvider * *)" (?NS_NewProfileDirServiceProvider@@YAIHPAPAVnsProfileDirServiceProvider@@@Z) referenced in function "unsigned int __cdecl StartupProfile(void)" (&lt;a href="mailto:?StartupProfile@@YAIXZ"&gt;?StartupProfile@@YAIXZ&lt;/a&gt;)
</code></pre></div>    </div>
  </li>
</ol>
:ET