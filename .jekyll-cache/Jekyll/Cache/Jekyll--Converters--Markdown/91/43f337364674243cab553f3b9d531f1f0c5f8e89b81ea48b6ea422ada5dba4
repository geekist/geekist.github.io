I"ğ<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ Vim é‡Œç¼–è¾‘ä¸€ä¸ªå¾ˆé•¿çš„ Markdown æ–‡æ¡£ï¼Œè¿™æ—¶æƒ³è·³è½¬åˆ°å¦ä¸€ä¸ªç« èŠ‚å»æŸ¥çœ‹æˆ–ç¼–è¾‘å†…å®¹ï¼Œå¯ä»¥æ€ä¹ˆåšï¼Ÿ</p>

<ol>
  <li>æŸ¥æ‰¾ç« èŠ‚æ ‡é¢˜ã€‚</li>
  <li>ä¸Šä¸‹ç¿»é¡µã€‚</li>
  <li>è®°å¾—è¡Œå·ï¼Œç²¾ç¡®è·³è½¬ï¼ˆè¯·æ”¶ä¸‹æˆ‘çš„è†ç›–ï¼‰ã€‚</li>
  <li>â€¦</li>
</ol>

<p>ä¸çŸ¥ä½ æ­¤æ—¶æ„Ÿå—å¦‚ä½•ï¼Œåæ­£æˆ‘æ˜¯æ— æ¯”æƒ³å¿µ Word çš„å¯¼èˆªçª—æ ¼ï¼Œå„ç§ç¼–ç¨‹ IDE çš„ Outlineã€‚</p>

<p>ä½†ç­‰ç­‰ï¼Œæˆ‘ä»¬æ­£åœ¨ç”¨ç¼–è¾‘å™¨ä¹‹ç¥ Vim è¯¶ï¼æ— è®ºæƒ³å¼„å•¥æŠ˜è…¾æŠ˜è…¾å°±æœ‰äº†ã€‚</p>

<h2 id="æœ€ç»ˆæ•ˆæœ">æœ€ç»ˆæ•ˆæœ</h2>

<p>æˆ‘çš„å®Œæ•´ Vim é…ç½®æ‰˜ç®¡åœ¨ GitHubï¼Œå¯ä¾›å‚è€ƒï¼š<a href="https://github.com/mzlogin/config-files">config-files</a></p>

<p><img src="/images/posts/vim/vim-markdown-outline.png" alt="" /></p>

<h2 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h2>

<h3 id="å®‰è£…-tagbar">å®‰è£… tagbar</h3>

<p>è¿™é‡Œæˆ‘ä»¬å€ŸåŠ©äº tagbar æ’ä»¶å®ç°å¯¼èˆªçª—æ ¼ã€‚å½“ç„¶ tagbar çš„åŠŸèƒ½è¿œä¸é™äºæ­¤ï¼Œå¯ä»¥ä¸º Cã€C++ã€Python å’Œ Java ç­‰å¾ˆå¤šè¯­è¨€æä¾›ç±»å’Œæ–¹æ³•åˆ—è¡¨è§†å›¾ç­‰ç­‰ï¼Œè¯¦è§ <a href="https://github.com/majutsushi/tagbar">tagbar</a>ã€‚</p>

<p>æ¨èä½¿ç”¨ <a href="https://github.com/VundleVim/Vundle.vim">Vundle</a> ç®¡ç† Vim æ’ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥ç®€å•å‡ æ­¥å®‰è£…æ’ä»¶äº†ã€‚</p>

<ol>
  <li>
    <p>åœ¨ vimrc æ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>

    <div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Plugin <span class="s1">'majutsushi/tagbar'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">:so $MYVIMRC</code></p>
  </li>
  <li>
    <p>æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">:PluginInstall</code></p>
  </li>
</ol>

<h3 id="å®‰è£…-exuberant-ctags">å®‰è£… Exuberant ctags</h3>

<p>tagbar æ­£å¸¸å·¥ä½œä¾èµ–äº Vim 7.0+ å’Œ Exuberant ctagsã€‚</p>

<p>ä¸‹è½½åœ°å€ï¼š<a href="http://ctags.sourceforge.net/">http://ctags.sourceforge.net/</a>ã€‚</p>

<p>ä¸‹è½½åå°† ctags å¯æ‰§è¡Œæ–‡ä»¶æ”¾ç½®åˆ°ä¸€ä¸ªåœ¨ PATH ç¯å¢ƒå˜é‡çš„æ–‡ä»¶å¤¹é‡Œï¼Œæˆ–è€… Vim å®‰è£…ç›®å½•çš„ Vim74 æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯”å¦‚æˆ‘æ˜¯å°† ctags.exe æ”¾åœ¨ <code class="language-plaintext highlighter-rouge">D:\Program Files (x86)\Vim\vim74</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p>

<h3 id="é…ç½®-tagbar-æ˜¾ç¤º-markdown-å¯¼èˆªçª—æ ¼">é…ç½® tagbar æ˜¾ç¤º Markdown å¯¼èˆªçª—æ ¼</h3>

<p>tagbar é»˜è®¤å¹¶ä¸æ”¯æŒ Markdown æ–‡ä»¶ï¼Œä½†é…ç½®ä¸€ä¸‹å°±å¥½äº†ã€‚</p>

<ol>
  <li>
    <p>åˆ›å»º ~/.ctags.d/markdown.ctags æ–‡ä»¶ï¼ˆWindows ä¸‹æ˜¯ <code class="language-plaintext highlighter-rouge">C:\Users\&lt;username&gt;\.ctags.d\markdown.ctags</code>ï¼‰ï¼Œå°†å¦‚ä¸‹å†…å®¹è´´åˆ°æ–‡ä»¶é‡Œï¼š</p>

    <div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">--</span>langdef<span class="p">=</span>markdown
<span class="p">--</span><span class="nb">langmap</span><span class="p">=</span>markdown<span class="p">:.</span>md
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{1}[ \t]*([^#]+.*)/</span><span class="p">.</span> \<span class="m">1</span><span class="sr">/h,headings/</span>
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{2}[ \t]*([^#]+.*)/</span><span class="p">.</span>   \<span class="m">1</span><span class="sr">/h,headings/</span>
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{3}[ \t]*([^#]+.*)/</span><span class="p">.</span>     \<span class="m">1</span><span class="sr">/h,headings/</span>
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{4}[ \t]*([^#]+.*)/</span><span class="p">.</span>       \<span class="m">1</span><span class="sr">/h,headings/</span>
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{5}[ \t]*([^#]+.*)/</span><span class="p">.</span>         \<span class="m">1</span><span class="sr">/h,headings/</span>
<span class="p">--</span>regex<span class="p">-</span>markdown<span class="p">=</span><span class="sr">/^#{6}[ \t]*([^#]+.*)/</span><span class="p">.</span>           \<span class="m">1</span><span class="sr">/h,headings/</span>
</code></pre></div>    </div>

    <p>è¿™è¡¨ç¤ºæå– Markdown æ–‡ä»¶é‡Œçš„ä¸€åˆ°å…­çº§æ ‡é¢˜ï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼ç¼©è¿›è¡¨ç¤ºå±‚æ¬¡ã€‚</p>
  </li>
  <li>
    <p>ç»™ä½ çš„ vimrc æ–‡ä»¶é‡Œå¢åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>

    <div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">g:tagbar_type_markdown</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">        \</span> <span class="s1">'ctagstype'</span> <span class="p">:</span> <span class="s1">'markdown'</span><span class="p">,</span>
<span class="se">        \</span> <span class="s1">'kinds'</span> <span class="p">:</span> <span class="p">[</span>
<span class="se">                \</span> <span class="s1">'h:headings'</span><span class="p">,</span>
<span class="se">        \</span> <span class="p">],</span>
<span class="se">    \</span> <span class="s1">'sort'</span> <span class="p">:</span> <span class="m">0</span>
<span class="se">\</span> <span class="p">}</span>
</code></pre></div>    </div>

    <p>é…ç½® tagbar æ”¯æŒ Markdownã€‚</p>
  </li>
</ol>

<h3 id="æ›´å¤šè‡ªå®šä¹‰é…ç½®">æ›´å¤šè‡ªå®šä¹‰é…ç½®</h3>

<ol>
  <li>
    <p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">:TagbarToggle&lt;CR&gt;</code> æ¥æ‰“å¼€å¯¼èˆªçª—æ ¼äº†ï¼Œä½†æ¯æ¬¡å¼€å…³å¯¼èˆªçª—æ ¼éƒ½è¦æ•²è¿™ä¹ˆé•¿ä¸€ä¸²å‘½ä»¤æ¯•ç«Ÿä¸å¤Ÿæ–¹ä¾¿ï¼Œé…ç½®å¿«æ·é”®æ¥æ“ä½œæ›´é¡ºæ‰‹ï¼Œåœ¨ä½ çš„ vimrc æ–‡ä»¶é‡Œå¢åŠ ä¸€ä¸ªæ˜ å°„ï¼š</p>

    <div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="nb">tb</span> <span class="p">:</span>TagbarToggle<span class="p">&lt;</span>CR<span class="p">&gt;</span>
</code></pre></div>    </div>

    <p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">&lt;leader&gt;tb</code> æ¥éšæ—¶å¼€/å…³å¯¼èˆªçª—æ ¼äº†ã€‚</p>
  </li>
  <li>
    <p>å¯¼èˆªçª—æ ¼é»˜è®¤æ˜¯åœ¨å³è¾¹ï¼Œå¦‚æœä½ ä¹Ÿåƒæˆ‘ä¸€æ ·å–œæ¬¢å®ƒåœ¨å·¦è¾¹ï¼Œä¹Ÿæƒ³æŒ‡å®šå®ƒçš„å®½åº¦ï¼Œå¯ä»¥åœ¨ä½ çš„ vimrc æ–‡ä»¶é‡Œé…ç½®ï¼š</p>

    <div class="language-viml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">g:tagbar_width</span> <span class="p">=</span> <span class="m">30</span>
<span class="k">let</span> <span class="nv">g:tagbar_left</span> <span class="p">=</span> <span class="m">1</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆäº†ï¼</p>

<p>æ ¹æ®æˆ‘çš„è¿™ä¸ªæ–‡ç« æ²¡æœ‰é…ç½®æˆåŠŸçš„åŒå­¦ï¼Œå¯ä»¥å‚è€ƒä¸‹æˆ‘çš„é…ç½® <a href="https://github.com/mzlogin/config-files">https://github.com/mzlogin/config-files</a> ã€‚</p>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://github.com/majutsushi/tagbar/issues/70">majutsushi/tagbar#70</a></li>
  <li><a href="https://github.com/majutsushi/tagbar/wiki">Support for additional filetypes</a></li>
  <li><a href="http://docs.ctags.io/en/latest/optlib.html#option-files">Extending ctags with Regex parser (optlib) - Option files</a></li>
</ul>
:ET